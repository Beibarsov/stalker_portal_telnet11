/*! stalker-api-loader: v0.0.1 (webpack: v1.13.1) */
!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return e[n].call(s.exports,s,s.exports,t),s.loaded=!0,s.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(module,exports,__webpack_require__){"use strict";function xorString(e,t){return e.split("").map(function(e,i){return i%=t.length,String.fromCharCode(e.charCodeAt(0)^t.charCodeAt(i))}).join("")}function ping(e){setTimeout(function(){app.stalker.request("users/"+app.stalker.session.userId+"/ping",{onload:function(){ping(e)}})},e)}var app=__webpack_require__(5),router=__webpack_require__(4),md5=__webpack_require__(6),a=null;window.gettext=function(){return arguments[0]},window.fetch=function(){return a||(a=XMLHttpRequest,window.XMLHttpRequest=null),new a},app.addListeners({load:function load(){var client=fetch(),session=window.core.plugins.ufsJson.loadSync();client.open("GET",window.core.config.options.sap),client.onload=function(){var data=this.responseText.split("."),key=atob(data.shift()),md5Key=md5(key),rawData=atob(data[0]);key=gSTB.GetHashVersion1(key,md5Key),data=xorString(rawData,key);try{app.stalker=eval(data)}catch(error){}router.init([__webpack_require__(7)]),router.navigate("pageLogin"),app.stalker.host=window.core.config.options.stalkerApiHost,app.stalker.authHost=window.core.config.options.stalkerAuthHost,app.stalker.lang=window.core.environment.language,app.stalker.saveCallback=function(){window.core.plugins.ufsJson.save(app.stalker.session)},app.stalker.onfail=function(e){setTimeout(function(){window.core.notify({title:e,icon:"alert",type:"error",timeout:5e3})},1e3)},window.parent.extendCorePrototype("stalker",{host:window.core.config.options.stalkerHost,request:app.stalker.request,session:app.stalker.session}),session&&session.accessToken&&session.userId?(app.stalker.session=session,app.stalker.request("users/"+app.stalker.session.userId+"/ping",{onload:function(e,t){window.core.events.show=null,window.core.emit("ready"),ping(window.core.config.options.pingTimeout)},onerror:function(e){window.core.events.show=null,window.core.emit("ready"),ping(window.core.config.options.pingTimeout)},ontimeout:function(e){window.core.events.show=null,window.core.emit("ready"),ping(window.core.config.options.pingTimeout)}})):session&&session.refreshToken?app.stalker.auth.refreshToken(session.refreshToken,function(e){e?app.stalker.auth.login({password:"",login:""},function(e,t){e?app.stalker.oncredenitalsrequired():(window.core.events.show=null,window.core.emit("ready"),ping(window.core.config.options.pingTimeout))}):(window.core.events.show=null,window.core.emit("ready"),ping(window.core.config.options.pingTimeout))}):app.stalker.auth.login({password:"",login:""},function(e,t){e?app.stalker.oncredenitalsrequired():(window.core.events.show=null,window.core.emit("ready"),ping(window.core.config.options.pingTimeout))})},client.send()},done:function(){router.navigate("pageMain")}})},function(e,t,i){"use strict";function n(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,s.call(this,e.data),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className+=" component "+(e.className||""),this.id=e.id||this.$node.id||"cid"+a++,e.parent&&e.parent.add(this),e.visible===!1&&this.hide(),e.focusable===!1&&(this.focusable=!1),this.defaultEvents){e.events=e.events||{};for(t in this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t]}e.events&&this.addListeners(e.events),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){0===e.button&&(i.focus(),i.events.click&&i.emit("click",{event:e})),e.stopPropagation()})}var s=i(3),o=i(4),a=0;n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.defaultEvents=null,n.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events.add&&this.emit("add",{item:e})},n.prototype.remove=function(){this.parent&&(o.current.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.removeAllListeners(),this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},n.prototype.focus=function(e){var t=o.current,i=t.activeComponent;return this.focusable&&this!==i?(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),i.events.focus&&i.emit("focus",e),!0):!1},n.prototype.blur=function(){var e=o.current,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.events.blur&&this.emit("blur"),!0):!1},n.prototype.show=function(e){return this.visible?!0:(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",e),!0)},n.prototype.hide=function(){return this.visible?(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0):!0},e.exports=n},function(e,t){"use strict";e.exports={back:8,"delete":46,channelPrev:1009,channelNext:9,ok:13,exit:27,up:38,down:40,left:37,right:39,pageUp:33,pageDown:34,end:35,home:36,volumeUp:107,volumeDown:109,f1:112,f2:113,f3:114,f4:115,refresh:116,frame:117,phone:119,set:120,tv:121,menu:122,web:123,mic:2032,rewind:2066,forward:2070,app:2076,usbMounted:2080,usbUnmounted:2081,playPause:2082,stop:2083,power:2085,record:2087,info:2089,mute:2192,clock:2032,audio:2071,keyboard:2076}},function(e,t,i){"use strict";function n(){this.events={}}n.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function n(){t.apply(this,arguments),i.removeListener(e,n)})},addListeners:function(e){var t;if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},removeAllListeners:function(e){0===arguments.length?this.events={}:e&&(this.events[e]=void 0)},emit:function(e,t,i){var n,s=this.events[e];if(s)for(n=0;n<s.length;n++)s[n].apply(this,Array.prototype.slice.call(arguments,1))}},n.prototype.constructor=n,e.exports=n},function(e,t,i){"use strict";var n,s=i(3);n=new s,n.current=null,n.history=[],n.pages=[],n.ids={},n.init=function(e){var t,i,n;if(e){for(this.pages=[],this.pages=e,t=0,i=e.length;i>t;t++)n=e[t],this.ids[n.id]=n,n.active&&(this.current=n);return this.events.init&&this.emit("init",{pages:e}),!0}return!1},n.parse=function(e){var t={name:"",data:[]};return t.data=e.split("/").map(decodeURIComponent),t.name=t.data.shift().slice(1),t},n.stringify=function(e,t){return t=Array.isArray(t)?t:[],e=encodeURIComponent(e),t=t.map(encodeURIComponent),t.unshift(e),t.join("/")},n.show=function(e,t){return e&&!e.active?(e.$node.classList.add("active"),e.active=!0,this.current=e,e.events.show&&e.emit("show",{page:e,data:t}),!0):!1},n.hide=function(e){return e&&e.active?(e.$node.classList.remove("active"),e.active=!1,this.current=null,e.events.hide&&e.emit("hide",{page:e}),!0):!1},n.navigate=function(e,t){var i=this.current,n=this.ids[e];return n&&!n.active?(location.hash=this.stringify(e,t),this.hide(this.current),this.show(n,t),this.events.navigate&&this.emit("navigate",{from:i,to:n}),this.history.push(n),!0):!1},n.back=function(){var e,t;return this.history.length>1&&(e=this.history.pop(),t=this.history[this.history.length-1],t&&!t.active)?(location.hash=t.id,this.hide(this.current),this.show(t),this.events.navigate&&this.emit("navigate",{from:e,to:t}),!0):!1},e.exports=n},function(e,t,i){"use strict";var n,s,o,a,r=i(8),c=i(4),h=i(2),d=i(17),l={};i(9),window.core=window.parent.getCoreInstanse(window),window.core.once("load",function(){n.data.time.load&&n.defaultEvents.load({type:"load"})}),window.localStorage=window.parent.localStorage||window.parent.stbStorage,window.parent&&window.parent.gSTB&&(window.dvbManager=window.parent.dvbManager,window.epgManager=window.parent.epgManager,window.gSTB=window.parent.gSTB,window.pvrManager=window.parent.pvrManager,window.stbDownloadManager=window.parent.stbDownloadManager,window.stbStorage=window.parent.stbStorage,window.stbUpdate=window.parent.stbUpdate,window.stbUPnP=window.parent.stbUPnP,window.stbWebWindow=window.parent.stbWebWindow,window.stbWindowMgr=window.parent.stbWindowMgr,window.timeShift=window.parent.timeShift),n=new r({debug:!1,host:!0,screen:null,time:{init:+new Date,load:0,done:0}}),n.setScreen=function(e){return e?(e.availHeight=e.height-(e.availTop+e.availBottom),e.availWidth=e.width-(e.availLeft+e.availRight),window.moveTo(0,0),window.resizeTo(e.width,e.height),o&&o instanceof HTMLLinkElement&&document.head.removeChild(o),a&&a instanceof HTMLLinkElement&&document.head.removeChild(a),a=document.createElement("link"),a.rel="stylesheet",a.href=window.core.theme.path+e.height+".css?"+ +new Date,document.head.appendChild(a),o=document.createElement("link"),o.rel="stylesheet",o.href="css/release."+e.height+".css?"+ +new Date,document.head.appendChild(o),this.data.metrics=e,!0):!1},n.EVENT_END_OF_FILE=1,n.EVENT_GET_MEDIA_INFO=2,n.EVENT_PLAYBACK_BEGIN=4,n.EVENT_CONTENT_ERROR=5,n.EVENT_DUAL_MONO_DETECT=6,n.EVENT_INFO_GET=7,n.EVENT_SUBTITLE_LOAD_ERROR=8,n.EVENT_SUBTITLE_FIND=9,n.EVENT_HDMI_CONNECT=32,n.EVENT_HDMI_DISCONNECT=33,n.EVENT_RECORD_FINISH_SUCCESSFULL=34,n.EVENT_RECORD_FINISH_ERROR=35,n.EVENT_DVB_SCANING=40,n.EVENT_DVB_FOUND=41,n.EVENT_DVB_CHANELL_EPG_UPDATE=42,n.EVENT_DVB_ANTENNA_OFF=43,n.setScreen(d[screen.height]||d[720]);for(s in h)"volumeUp"!==s&&"volumeDown"!==s&&(l[h[s]]=!0);n.defaultEvents={load:function(e){n.data.time.load=e.timeStamp,window.core.ready&&(n.events[e.type]&&n.emit(e.type,e),c.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)}),n.data.time.done=+new Date,n.events.done&&n.emit("done",e))},unload:function(e){n.events[e.type]&&n.emit(e.type,e),c.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)})},error:function(e){},keydown:function(e){var t,i=c.current,s={keyCode:e.keyCode,stop:e.stop,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type,"native":e};0!==s.keyCode&&(s.code=s.keyCode,s.shiftKey&&(s.code+=1e3),s.altKey&&(s.code+=2e3),t=i.activeComponent,t&&t!==i&&(t.events[s.type]&&t.emit(s.type,s),!s.stop&&t.propagate&&t.parent&&t.parent.events[s.type]&&t.parent.emit(s.type,s)),s.stop||(i.events[s.type]&&i.emit(s.type,s),s.stop||n.events[s.type]&&n.emit(s.type,s)),n.data.host&&l[s.code]&&e.preventDefault())},keypress:function(e){var t=c.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},click:function(e){},contextmenu:function(e){e.preventDefault()},mousewheel:function(e){var t=c.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}};for(s in n.defaultEvents)window.addEventListener(s,n.defaultEvents[s]);n.show=function(){this.events.show&&this.emit("show"),window.core.call("app:ready")},n.exit=function(e){var t,s=i(15),o=i(13),a=c.current.activeComponent;c.current.add(t=new s({title:gettext("Exit"),events:{show:function(){this.children[0].focus()},hide:function(){a.focus()}},children:[new o({size:2,focusIndex:0,data:[{items:[{value:gettext("Exit")}],click:function(){return"function"==typeof e&&e(!0)?(t.hide(),void t.remove()):(n.events.exit&&n.emit("exit"),t.hide(),t.remove(),void core.call("exit"))}},{items:[{value:gettext("Cancel")}],click:function(){"function"==typeof e&&e(!1),t.hide(),t.remove()}}],events:{keydown:function(i){o.prototype.defaultEvents.keydown.call(this,i),i.code===h.back&&(i.stop=!0,"function"==typeof e&&e(!1),t.hide(),t.remove())}}})]})),t.show(),t.focus()},window.stbEvent={},window.stbEvent.onEvent=function(e,t){if(Array.prototype.forEach.call(window.frames,function(i){i.stbEvent&&i.stbEvent.onEvent&&i.stbEvent.onEvent(e,t)}),n.events.media){if(t)try{t=JSON.parse(t)}catch(i){}n.emit("media",{code:parseInt(e,10),info:t})}},window.stbEvent.onBroadcastMessage=function(e,t,i){Array.prototype.forEach.call(window.frames,function(n){n.stbEvent&&n.stbEvent.onBroadcastMessage&&n.stbEvent.onBroadcastMessage(e,t,i)}),n.events.message&&n.emit("message",{broadcast:!0,windowId:e,message:t,data:i})},window.stbEvent.onMessage=function(e,t,i){Array.prototype.forEach.call(window.frames,function(n){n.stbEvent&&n.stbEvent.onMessage&&n.stbEvent.onMessage(e,t,i)}),n.events.message&&n.emit("message",{broadcast:!1,windowId:e,message:t,data:i})},window.stbEvent.onMount=function(e){Array.prototype.forEach.call(window.frames,function(t){t.stbEvent&&t.stbEvent.onMount&&t.stbEvent.onMount(e)}),n.events["device:mount"]&&n.emit("device:mount",{state:e})},window.stbEvent.onMediaAvailable=function(e,t){Array.prototype.forEach.call(window.frames,function(i){i.stbEvent&&i.stbEvent.onMediaAvailable&&i.stbEvent.onMediaAvailable(e,t)}),n.events["media:available"]&&n.emit("media:available",{mime:e,url:t})},window.stbEvent.onNetworkStateChange=function(e){n.events["internet:state"]&&n.emit("internet:state",{state:e})},window.stbEvent.onWebBrowserProgress=function(e){Array.prototype.forEach.call(window.frames,function(t){t.stbEvent&&t.stbEvent.onWebBrowserProgress&&t.stbEvent.onWebBrowserProgress(e)}),n.events["browser:progress"]&&n.emit("browser:progress",{progress:e})},window.stbEvent.onWindowActivated=function(){Array.prototype.forEach.call(window.frames,function(e){e.stbEvent&&e.stbEvent.onWindowActivated&&e.stbEvent.onWindowActivated()}),n.events["window:focus"]&&n.emit("window:focus")},window.gSTB&&gSTB.SetNativeStringMode&&gSTB.SetNativeStringMode(!0),e.exports=n},function(e,t){"use strict";function i(e,t){var i=e[0],n=e[1],c=e[2],h=e[3];i=s(i,n,c,h,t[0],7,-680876936),h=s(h,i,n,c,t[1],12,-389564586),c=s(c,h,i,n,t[2],17,606105819),n=s(n,c,h,i,t[3],22,-1044525330),i=s(i,n,c,h,t[4],7,-176418897),h=s(h,i,n,c,t[5],12,1200080426),c=s(c,h,i,n,t[6],17,-1473231341),n=s(n,c,h,i,t[7],22,-45705983),i=s(i,n,c,h,t[8],7,1770035416),h=s(h,i,n,c,t[9],12,-1958414417),c=s(c,h,i,n,t[10],17,-42063),n=s(n,c,h,i,t[11],22,-1990404162),i=s(i,n,c,h,t[12],7,1804603682),h=s(h,i,n,c,t[13],12,-40341101),c=s(c,h,i,n,t[14],17,-1502002290),n=s(n,c,h,i,t[15],22,1236535329),i=o(i,n,c,h,t[1],5,-165796510),h=o(h,i,n,c,t[6],9,-1069501632),c=o(c,h,i,n,t[11],14,643717713),n=o(n,c,h,i,t[0],20,-373897302),i=o(i,n,c,h,t[5],5,-701558691),h=o(h,i,n,c,t[10],9,38016083),c=o(c,h,i,n,t[15],14,-660478335),n=o(n,c,h,i,t[4],20,-405537848),i=o(i,n,c,h,t[9],5,568446438),h=o(h,i,n,c,t[14],9,-1019803690),c=o(c,h,i,n,t[3],14,-187363961),n=o(n,c,h,i,t[8],20,1163531501),i=o(i,n,c,h,t[13],5,-1444681467),h=o(h,i,n,c,t[2],9,-51403784),c=o(c,h,i,n,t[7],14,1735328473),n=o(n,c,h,i,t[12],20,-1926607734),i=a(i,n,c,h,t[5],4,-378558),h=a(h,i,n,c,t[8],11,-2022574463),c=a(c,h,i,n,t[11],16,1839030562),n=a(n,c,h,i,t[14],23,-35309556),i=a(i,n,c,h,t[1],4,-1530992060),h=a(h,i,n,c,t[4],11,1272893353),c=a(c,h,i,n,t[7],16,-155497632),n=a(n,c,h,i,t[10],23,-1094730640),i=a(i,n,c,h,t[13],4,681279174),h=a(h,i,n,c,t[0],11,-358537222),c=a(c,h,i,n,t[3],16,-722521979),n=a(n,c,h,i,t[6],23,76029189),i=a(i,n,c,h,t[9],4,-640364487),h=a(h,i,n,c,t[12],11,-421815835),c=a(c,h,i,n,t[15],16,530742520),n=a(n,c,h,i,t[2],23,-995338651),i=r(i,n,c,h,t[0],6,-198630844),h=r(h,i,n,c,t[7],10,1126891415),c=r(c,h,i,n,t[14],15,-1416354905),n=r(n,c,h,i,t[5],21,-57434055),i=r(i,n,c,h,t[12],6,1700485571),h=r(h,i,n,c,t[3],10,-1894986606),c=r(c,h,i,n,t[10],15,-1051523),n=r(n,c,h,i,t[1],21,-2054922799),i=r(i,n,c,h,t[8],6,1873313359),h=r(h,i,n,c,t[15],10,-30611744),c=r(c,h,i,n,t[6],15,-1560198380),n=r(n,c,h,i,t[13],21,1309151649),i=r(i,n,c,h,t[4],6,-145523070),h=r(h,i,n,c,t[11],10,-1120210379),c=r(c,h,i,n,t[2],15,718787259),n=r(n,c,h,i,t[9],21,-343485551),e[0]=f(i,e[0]),e[1]=f(n,e[1]),e[2]=f(c,e[2]),e[3]=f(h,e[3])}function n(e,t,i,n,s,o){return t=f(f(t,e),f(n,o)),f(t<<s|t>>>32-s,i)}function s(e,t,i,s,o,a,r){return n(t&i|~t&s,e,t,o,a,r)}function o(e,t,i,s,o,a,r){return n(t&s|i&~s,e,t,o,a,r)}function a(e,t,i,s,o,a,r){return n(t^i^s,e,t,o,a,r)}function r(e,t,i,s,o,a,r){return n(i^(t|~s),e,t,o,a,r)}function c(e){var t,n=e.length,s=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)i(s,h(e.substring(t-64,t)));e=e.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)o[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(i(s,o),t=0;16>t;t++)o[t]=0;return o[14]=8*n,i(s,o),s}function h(e){var t,i=[];for(t=0;64>t;t+=4)i[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return i}function d(e){for(var t="",i=0;4>i;i++)t+=v[e>>8*i+4&15]+v[e>>8*i&15];return t}function l(e){for(var t=0;t<e.length;t++)e[t]=d(e[t]);return e.join("")}function p(e){return l(c(e))}function u(e,t){var i=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(i>>16);return n<<16|65535&i}var v="0123456789abcdef".split(""),f=function(e,t){return e+t&4294967295};"5d41402abc4b2a76b9719d911017c592"!=p("hello")&&(f=u),e.exports=function(e){return l(c(e))}},function(e,t,i){"use strict";var n=i(5),s=i(2),o=i(16),a=i(11),r=i(10),c=new o({$node:window.pageLogin}),h=new a({$node:window.plInputLogin,placeholder:gettext("Login"),events:{keydown:function(e){switch(e.code){case s["delete"]:this.removeChar(this.$caret.index);break;case s.back:this.removeChar(this.$caret.index-1);break;case s.left:this.setCaretPosition(this.$caret.index-1);break;case s.right:this.setCaretPosition(this.$caret.index+1);break;case s.end:this.setCaretPosition(this.value.length);break;case s.home:this.setCaretPosition(0);break;case s.down:d.focus()}}}}),d=new a({$node:window.plInputPassword,type:a.prototype.TYPE_PASSWORD,placeholder:gettext("Password"),events:{keydown:function(e){switch(e.code){case s["delete"]:this.removeChar(this.$caret.index);break;case s.back:this.removeChar(this.$caret.index-1);break;case s.left:this.setCaretPosition(this.$caret.index-1);break;case s.right:this.setCaretPosition(this.$caret.index+1);break;case s.end:this.setCaretPosition(this.value.length);break;case s.home:this.setCaretPosition(0);break;case s.down:l.focus();break;case s.up:h.focus()}}}}),l=new r({$node:window.plButtonSubmit,value:gettext("Sign in")}),p=null;n.stalker.oncredenitalsrequired=function(e){p=e,window.core.emit("show"),window.core.call("show"),window.core.call("focus")},c.addListener("show",function(){h.focus()}),l.addListener("keydown",function(e){e.code===s.up&&d.focus()}),l.addListener("click",function(e){window.plLabelError.className="",0===h.value.length?(window.plLabelError.innerText=gettext("Error.")+" "+gettext("Please, input login"),window.plLabelError.className="visible",h.focus()):0===d.value.length?(window.plLabelError.innerText=gettext("Error.")+" "+gettext("Please, input password"),window.plLabelError.className="visible",d.focus()):n.stalker.auth.login({password:d.value,login:h.value},function(e,t){e?t.error_description?(window.plLabelError.innerText=gettext(t.error_description),window.plLabelError.className="visible",h.focus()):(window.plLabelError.innerText=gettext(t.error_description),window.plLabelError.className="visible",h.focus()):(window.core.call("hide"),window.core.call("blur"),p&&p())})}),e.exports=c},function(e,t,i){"use strict";function n(e){s.call(this),this.data=e||{}}var s=i(3);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.idName="id",n.prototype.clear=function(){var e=this.data;return Object.keys(e).length>0?(this.data={},this.events.clear&&this.emit("clear",{data:e}),!0):!1},n.prototype.init=function(e){return e?(this.clear(),this.data=e,this.events.init&&this.emit("init",{data:e}),!0):!1},n.prototype.has=function(e){return this.data.hasOwnProperty(e)},n.prototype.get=function(e){return this.data[e]},n.prototype.set=function(e,t){var i=e in this.data,n={name:e,curr:t};return i?(n.prev=this.data[e],t!==n.prev?(this.data[e]=t,this.events.change&&this.emit("change",n),!0):!1):(this.data[e]=t,this.events.change&&this.emit("change",n),!0)},n.prototype.unset=function(e){var t,i=e in this.data;return i?(t={name:e,prev:this.data[e]},delete this.data[e],this.events.change&&this.emit("change",t),!0):!1},e.exports=n},function(e,t){"use strict";if(!("classList"in document.documentElement)){var i=Array.prototype,n=i.indexOf,s=i.slice,o=i.push,a=i.splice,r=i.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)o.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(o.call(this,e),this._element.className=s.call(this,0).join(" "))},contains:function(e){return-1!==n.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=n.call(this,e);-1!==t&&(a.call(this,t,1),this._element.className=s.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";function n(e){e=e||{},e.className="button "+(e.className||""),s.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}var s=i(1),o=i(2);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.clickDuration=200,n.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===o.ok&&this.events.click&&this.emit("click",{event:e})}},e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.value="",this.type=this.TYPE_TEXT,e.className="input "+(e.className||""),s.call(this,e),this.$line=this.$body.appendChild(document.createElement("div")),this.$line.className="line",this.$caret=this.$line.appendChild(document.createElement("div")),this.$caret.className="caret",this.$placeholder=this.$line.appendChild(document.createElement("div")),this.$placeholder.className="placeholder",this.$caret.index=0,this.init(e)}var s=i(1),o=i(2);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.TYPE_TEXT=0,n.prototype.TYPE_PASSWORD=1,n.prototype.defaultEvents={keypress:function(e){this.addChar(String.fromCharCode(e.keyCode),this.$caret.index)},keydown:function(e){switch(e.code){case o["delete"]:this.removeChar(this.$caret.index);break;case o.back:this.removeChar(this.$caret.index-1);break;case o.left:this.setCaretPosition(this.$caret.index-1);break;case o.right:this.setCaretPosition(this.$caret.index+1);break;case o.end:case o.down:this.setCaretPosition(this.value.length);break;case o.home:case o.up:this.setCaretPosition(0)}}},n.prototype.init=function(e){e.type&&(this.type=e.type),e.value&&this.setValue(e.value),e.placeholder&&(this.$placeholder.innerText=e.placeholder),this.$line.dir=e.direction||"ltr"},n.prototype.addChar=function(e,t){var i=document.createElement("div");t=void 0===t?this.$caret.index:t,0===this.value.length&&this.$line.removeChild(this.$placeholder),i.className="char",this.value=this.value.substring(0,t)+e+this.value.substring(t,this.value.length),++this.$caret.index,this.type===this.TYPE_PASSWORD?i.innerText="*":" "===e?i.innerHTML="&nbsp;":i.innerText=e,t>=this.value.length?(this.$line.appendChild(i),this.$line.appendChild(this.$caret)):(this.$line.insertBefore(this.$caret,this.$line.children[t]),this.$line.insertBefore(i,this.$caret)),this.events.input&&this.emit("input",{value:this.value})},n.prototype.removeChar=function(e){var t=this.value;e=void 0===e?this.$caret.index-1:e,this.value.length>0&&(this.$caret.index===e&&e<this.value.length?this.$line.removeChild(this.$line.children[e+1]):this.$caret.index>e&&(--this.$caret.index,this.$line.removeChild(this.$line.children[e])),this.value=this.value.substring(0,e)+this.value.substring(e+1,this.value.length),this.events.input&&t!==this.value&&this.emit("input",{value:this.value})),0===this.value.length&&this.$line.appendChild(this.$placeholder)},n.prototype.setCaretPosition=function(e){e>=0&&e<=this.value.length&&this.$caret.index!==e&&(this.$line.removeChild(this.$caret),e===this.value.length?this.$line.appendChild(this.$caret):this.$line.insertBefore(this.$caret,this.$line.children[e]),this.$caret.index=e)},n.prototype.setValue=function(e){var t,i,n=this.value.length,s=e.length,o=0;if(e!==this.value){if(s>0){if(this.$placeholder.parentNode===this.$line&&this.$line.removeChild(this.$placeholder),this.$line.removeChild(this.$caret),s!==n)if(i=s-n,i>0)for(o=0;i>o;o++)t=this.$line.appendChild(document.createElement("div")),t.className="char";else for(o=0;o>i;o--)this.$line.removeChild(this.$line.lastChild);for(o=0;s>o;o++)t=this.$line.children[o],this.type===this.TYPE_PASSWORD?t.innerHTML="*":" "===e[o]?t.innerHTML="&nbsp;":t.innerText=e[o];this.value=e,this.$caret.index=s,this.$line.appendChild(this.$caret)}else this.value="",this.$line.innerText="",this.$line.appendChild(this.$caret),this.$line.appendChild(this.$placeholder),this.$caret.index=0;this.events.input&&this.emit("input",{value:this.value})}},e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.focusIndex=0,e.className="layout "+(e.className||""),this.data=[],o.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case a.right:this.children.length&&this.focusIndex<this.children.length-1&&this.children[++this.focusIndex].focus();break;case a.left:this.children.length&&this.focusIndex>0&&this.children[--this.focusIndex].focus();break;case a.back:this.parent.focus(),this.parent&&this.$parentItem&&this.parent.focusItem(this.$parentItem)}})}function s(e){var t,i;for(t=0;t<e.length;t++)i=e[t],"object"!=typeof i?e[t]={value:e[t],wrap:!0}:i instanceof o||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0;return e}var o=i(1),a=i(2);n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.init=function(e){for(var t,i,n,a=this,r=s(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);for(this.data=r,n=0;n<r.length;n++)t=r[n],"string"==typeof t.value?(i=document.createElement("div"),i.textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i)):this.$node.appendChild(t.value):t.value instanceof o&&(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",function(){a.focusIndex=this.index}),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this):this.add(t.value))},e.exports=n},function(e,t,i){"use strict";function n(e){var t,i=this;e=e||{},this.handlers={},this.$noData=null,e.className="layoutList "+(e.className||""),e.propagate=e.propagate||!0,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",s.call(this,e),this.$node.appendChild(this.$body),e.noData&&(e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&(t=document.createElement("div"),t.innerText=e.noData,this.$noData.appendChild(t)),this.$node.appendChild(this.$noData)),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(i.focus(),i.focusItem(e.$item)),i.handlers[e.$item.index]&&i.handlers[e.$item.index](e.$item)})}var s=i(14),o=i(12);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.renderItemDefault=function(e,t){var i,n;if(e.ready&&this.fixedData&&!e.innerHTML.length)for(n=0;n<t.items.length;n++)"string"==typeof t.items[n].value&&(e.layout.$node.childNodes[n].innerText=t.items[n].value,e.layout.$node.childNodes[n].className=t.items[n].className);else{for(;e.firstChild;)e.removeChild(e.firstChild);i=new o({focusable:!1,data:t.items}),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){this.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},n.prototype.setData=function(e){s.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},n.prototype.init=function(e){s.prototype.init.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},n.prototype.renderItem=n.prototype.renderItemDefault,e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,e.className="list "+(e.className||""),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),o.call(this,e),this.init(e)}function s(e){var t,i;for(t=0;t<e.length;t++)i=e[t],"object"!=typeof i&&(i=e[t]={value:e[t]});return e}var o=i(1),a=i(2);n.prototype=Object.create(o.prototype),n.prototype.constructor=n,n.prototype.TYPE_VERTICAL=1,n.prototype.TYPE_HORIZONTAL=2,n.prototype.renderItemDefault=function(e,t){e.innerText=t.value},n.prototype.renderItem=n.prototype.renderItemDefault,n.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?a.up:a.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?a.left:a.right)},keydown:function(e){switch(e.code){case a.up:case a.down:case a.right:case a.left:case a.pageUp:case a.pageDown:case a.home:case a.end:this.move(e.code);break;case a.ok:this.events["click:item"]&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},n.prototype.init=function(e){var t,i,n=this,s=this.$body.children.length,o=function(e){this.data&&(n.focusItem(this),n.events["click:item"]&&n.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),this.size!==s)for(s>0&&(this.$body.innerText=null),i=0;i<this.size;i++)t=document.createElement("div"),t.index=i,t.className="item",t.addEventListener("click",o),this.$body.appendChild(t);void 0!==e.viewIndex,this.viewIndex=null,this.provider?this.provider.get(null,function(t,i){t?n.events["data:error"]&&n.emit("data:error",t):(i&&(e.data=i,n.setData(e)),n.events["data:get"]&&n.emit("data:get"))}):e.data&&this.setData(e)},n.prototype.setData=function(e){e.data&&(this.data=s(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},n.prototype.renderView=function(e){var t,i,n,s,o;if(this.viewIndex!==e){for(s=this.viewIndex,this.viewIndex=o=e,i=0;i<this.size;i++)t=this.$body.children[i],n=this.data[e],n?(t.data=n,t.index=e,this.renderItem(t,n),n.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:s,currIndex:o}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.viewIndex),
!0}return!1},n.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case a.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.up:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.provider?this.provider.get(e,function(e,i){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:t.$focusItem.index})}):(this.cycle&&this.move(a.end),this.events.overflow&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case a.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case a.down:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.provider?this.provider.get(e,function(e,i){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:t.$focusItem.index})}):(this.cycle&&this.move(a.home),this.events.overflow&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case a.pageUp:if(this.provider)return void this.provider.get(e,function(e,i){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:0})});this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case a.pageUp:if(this.provider){this.provider.get(e,function(e,i){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:0})});break}this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case a.pageDown:if(this.provider){this.provider.get(e,function(e,i){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:i.length<t.size?i.length-1:t.size-1})});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case a.home:if(this.provider){this.provider.get(e,function(e,i){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case a.end:if(this.provider){this.provider.get(e,function(e,i){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:i.length<t.size?i.length-1:t.size-1})});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},n.prototype.focusItem=function(e){var t=this.$focusItem;return e&&t!==e?(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0):!1},n.prototype.blurItem=function(e){return e?(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0):!1},n.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):t>e?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},n.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=n},function(e,t,i){"use strict";function n(e){var t;e=e||{},e.focusable=e.focusable||!1,e.className="modalMessage "+(e.className||""),e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",s.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),t=document.createElement("div"),t.className="overlay",this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(this.$body),this.$node.firstChild.firstChild.appendChild(t)}var s=i(1);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,n.prototype.focus=function(){this.$node.classList.add("active"),s.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof s&&this.children[0].focus()},n.prototype.blur=function(){this.$node.classList.remove("active"),s.prototype.blur.call(this)},e.exports=n},function(e,t,i){"use strict";function n(e){e=e||{},this.active=!1,this.activeComponent=null,e.className="page "+(e.className||""),s.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var s=i(1);n.prototype=Object.create(s.prototype),n.prototype.constructor=n,e.exports=n},function(e,t){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60}}}]);