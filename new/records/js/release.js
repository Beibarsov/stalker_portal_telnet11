/*! pvr: v0.0.2 (webpack: v1.13.0) */
!function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";var a=i(5),n=i(3);a.addListeners({load:function(){i(26).load({name:core.environment.language||"en"},function(e){n.init([i(23),i(22),i(25),i(21),i(24)]),a.emit("ready"),n.pages.forEach(function(e){e.emit("load")})})}})},function(e,t,i){"use strict";function a(e){var t,i=this;if(e=e||{},this.visible=!0,this.focusable=!0,this.$node=null,this.$body=null,this.parent=null,this.children=[],this.propagate=!!e.propagate,n.call(this,e.data),this.$node=e.$node||document.createElement("div"),this.$body=e.$body||this.$node,this.$node.className+=" component "+(e.className||""),this.id=e.id||this.$node.id||"cid"+o++,e.parent&&e.parent.add(this),e.visible===!1&&this.hide(),e.focusable===!1&&(this.focusable=!1),this.defaultEvents){e.events=e.events||{};for(t in this.defaultEvents)e.events[t]=e.events[t]||this.defaultEvents[t]}e.events&&this.addListeners(e.events),e.children&&this.add.apply(this,e.children),this.$node.addEventListener("click",function(e){0===e.button&&(i.focus(),i.events.click&&i.emit("click",{event:e})),e.stopPropagation()})}var n=i(6),s=i(3),o=0;a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.defaultEvents=null,a.prototype.add=function(e){var t;for(t=0;t<arguments.length;t++)e=arguments[t],this.children.push(e),e.parent=this,e.$node&&null===e.$node.parentNode&&this.$body.appendChild(e.$node),this.events.add&&this.emit("add",{item:e})},a.prototype.remove=function(){this.parent&&(s.current.activeComponent===this&&(this.blur(),this.parent.focus()),this.parent.children.splice(this.parent.children.indexOf(this),1)),this.children.forEach(function(e){e.remove()}),this.removeAllListeners(),this.$node.parentNode.removeChild(this.$node),this.events.remove&&this.emit("remove")},a.prototype.focus=function(e){var t=s.current,i=t.activeComponent;return this.focusable&&this!==i?(i&&i.blur(),t.activeComponent=i=this,i.$node.classList.add("focus"),i.events.focus&&i.emit("focus",e),!0):!1},a.prototype.blur=function(){var e=s.current,t=e.activeComponent;return this.$node.classList.remove("focus"),this===t?(e.activeComponent=null,this.events.blur&&this.emit("blur"),!0):!1},a.prototype.show=function(e){return this.visible?!0:(this.$node.classList.remove("hidden"),this.visible=!0,this.events.show&&this.emit("show",e),!0)},a.prototype.hide=function(){return this.visible?(this.$node.classList.add("hidden"),this.visible=!1,this.events.hide&&this.emit("hide"),!0):!0},e.exports=a},function(e,t){"use strict";e.exports={back:8,"delete":46,channelPrev:1009,channelNext:9,ok:13,exit:27,up:38,down:40,left:37,right:39,pageUp:33,pageDown:34,end:35,home:36,volumeUp:107,volumeDown:109,f1:112,f2:113,f3:114,f4:115,refresh:116,frame:117,phone:119,set:120,tv:121,menu:122,web:123,mic:2032,rewind:2066,forward:2070,app:2076,usbMounted:2080,usbUnmounted:2081,playPause:2082,stop:2083,power:2085,record:2087,info:2089,mute:2192,clock:2032,audio:2071,keyboard:2076}},function(e,t,i){"use strict";var a,n=i(6);a=new n,a.current=null,a.history=[],a.pages=[],a.ids={},a.init=function(e){var t,i,a;if(e){for(this.pages=[],this.pages=e,t=0,i=e.length;i>t;t++)a=e[t],this.ids[a.id]=a,a.active&&(this.current=a);return this.events.init&&this.emit("init",{pages:e}),!0}return!1},a.parse=function(e){var t={name:"",data:[]};return t.data=e.split("/").map(decodeURIComponent),t.name=t.data.shift().slice(1),t},a.stringify=function(e,t){return t=Array.isArray(t)?t:[],e=encodeURIComponent(e),t=t.map(encodeURIComponent),t.unshift(e),t.join("/")},a.show=function(e,t){return e&&!e.active?(e.$node.classList.add("active"),e.active=!0,this.current=e,e.events.show&&e.emit("show",{page:e,data:t}),!0):!1},a.hide=function(e){return e&&e.active?(e.$node.classList.remove("active"),e.active=!1,this.current=null,e.events.hide&&e.emit("hide",{page:e}),!0):!1},a.navigate=function(e,t){var i=this.current,a=this.ids[e];return a&&!a.active?(location.hash=this.stringify(e,t),this.hide(this.current),this.show(a,t),this.events.navigate&&this.emit("navigate",{from:i,to:a}),this.history.push(a),!0):!1},a.back=function(){var e,t;return this.history.length>1&&(e=this.history.pop(),t=this.history[this.history.length-1],t&&!t.active)?(location.hash=t.id,this.hide(this.current),this.show(t),this.events.navigate&&this.emit("navigate",{from:e,to:t}),!0):!1},e.exports=a},function(e,t,i){"use strict";function a(e){e=e||{},this.active=!1,this.activeComponent=null,e.className="page "+(e.className||""),n.call(this,e),this.active=this.$node.classList.contains("active"),null===this.$node.parentNode&&document.body.appendChild(this.$node),this.page=this}var n=i(1);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,e.exports=a},function(e,t,i){"use strict";var a,n,s,o,r=i(27),l=i(3),d=i(2),c=i(34),h={};i(28),window.core=window.parent.getCoreInstance(window),window.core.once("load",function(){a.data.time.load&&a.defaultEvents.load({type:"load"})}),window.parent&&window.parent.gSTB&&(window.dvbManager=window.parent.dvbManager,window.epgManager=window.parent.epgManager,window.gSTB=window.parent.gSTB,window.pvrManager=window.parent.pvrManager,window.stbDownloadManager=window.parent.stbDownloadManager,window.stbStorage=window.parent.stbStorage,window.stbUpdate=window.parent.stbUpdate,window.stbUPnP=window.parent.stbUPnP,window.stbWebWindow=window.parent.stbWebWindow,window.stbWindowMgr=window.parent.stbWindowMgr,window.timeShift=window.parent.timeShift),a=new r({debug:!1,host:!0,screen:null,time:{init:+new Date,load:0,done:0}}),a.setScreen=function(e){return e?(e.availHeight=e.height-(e.availTop+e.availBottom),e.availWidth=e.width-(e.availLeft+e.availRight),window.moveTo(0,0),window.resizeTo(e.width,e.height),s&&s instanceof HTMLLinkElement&&document.head.removeChild(s),o&&o instanceof HTMLLinkElement&&document.head.removeChild(o),o=document.createElement("link"),o.rel="stylesheet",o.href=window.core.theme.path+e.height+".css?"+ +new Date,document.head.appendChild(o),s=document.createElement("link"),s.rel="stylesheet",s.href="css/release."+e.height+".css?"+ +new Date,document.head.appendChild(s),this.data.metrics=e,!0):!1},a.setScreen(c[screen.height]||c[720]);for(n in d)"volumeUp"!==n&&"volumeDown"!==n&&(h[d[n]]=!0);a.defaultEvents={load:function(e){a.data.time.load=e.timeStamp,window.core.ready&&(a.events[e.type]&&a.emit(e.type,e),l.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)}),a.data.time.done=+new Date,a.events.done&&a.emit("done",e))},unload:function(e){a.events[e.type]&&a.emit(e.type,e),l.pages.forEach(function(t){t.events[e.type]&&t.emit(e.type,e)})},error:function(e){},keydown:function(e){var t,i=l.current,n={keyCode:e.keyCode,stop:e.stop,shiftKey:e.shiftKey,altKey:e.altKey,type:e.type,"native":e};0!==n.keyCode&&(n.code=n.keyCode,n.shiftKey&&(n.code+=1e3),n.altKey&&(n.code+=2e3),t=i.activeComponent,t&&t!==i&&(t.events[n.type]&&t.emit(n.type,n),!n.stop&&t.propagate&&t.parent&&t.parent.events[n.type]&&t.parent.emit(n.type,n)),n.stop||(i.events[n.type]&&i.emit(n.type,n),n.stop||a.events[n.type]&&a.emit(n.type,n)),a.data.host&&h[n.code]&&e.preventDefault())},keypress:function(e){var t=l.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e)},click:function(e){},contextmenu:function(e){e.preventDefault()},mousewheel:function(e){var t=l.current;t.activeComponent&&t.activeComponent!==t&&t.activeComponent.events[e.type]&&t.activeComponent.emit(e.type,e),e.stop||t.events[e.type]&&t.emit(e.type,e)}};for(n in a.defaultEvents)window.addEventListener(n,a.defaultEvents[n]);a.show=function(){this.events.show&&this.emit("show"),window.core.call("app:ready")},a.exit=function(e){var t,n=i(14),s=i(8),o=l.current.activeComponent;l.current.add(t=new n({title:gettext("Exit"),events:{show:function(){this.children[0].focus()},hide:function(){o.focus()}},children:[new s({size:2,focusIndex:0,data:[{items:[{value:gettext("Exit")}],click:function(){return"function"==typeof e&&e(!0)?(t.hide(),void t.remove()):(a.events.exit&&a.emit("exit"),t.hide(),t.remove(),void core.call("exit"))}},{items:[{value:gettext("Cancel")}],click:function(){"function"==typeof e&&e(!1),t.hide(),t.remove()}}],events:{keydown:function(i){s.prototype.defaultEvents.keydown.call(this,i),i.code===d.back&&(i.stop=!0,"function"==typeof e&&e(!1),t.hide(),t.remove())}}})]})),t.show(),t.focus()},window.gSTB&&gSTB.SetNativeStringMode&&gSTB.SetNativeStringMode(!0),e.exports=a},function(e,t,i){"use strict";function a(){this.events={}}a.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function a(){t.apply(this,arguments),i.removeListener(e,a)})},addListeners:function(e){var t;if("object"==typeof e)for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},removeAllListeners:function(e){0===arguments.length?this.events={}:e&&(this.events[e]=void 0)},emit:function(e,t,i){var a,n=this.events[e];if(n)for(a=0;a<n.length;a++)n[a].apply(this,Array.prototype.slice.call(arguments,1))}},a.prototype.constructor=a,e.exports=a},function(e,t,i){"use strict";function a(e){function t(){var e=new Date,t=(e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours()),a=e.getMinutes();i.innerText=(t>9?t:"0"+t)+":"+(a>9?a:"0"+a)}var i=document.createElement("div");e=e||{},e.focusable=!1,e.className="clock "+(e.className||""),e.visible=e.visible||!0,n.call(this,e),t(),setInterval(t,1e3),this.$node.appendChild(i)}var n=i(1);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,e.exports=a},function(e,t,i){"use strict";function a(e){var t=this;e=e||{},this.handlers={},this.$noData=null,e.className="layoutList "+(e.className||""),e.propagate=e.propagate||!0,this.fixedData=e.fixedData||!1,e.$body=document.createElement("div"),e.$body.className="body",this.$noData=document.createElement("div"),this.$noData.className="noData hidden",n.call(this,e),this.$node.appendChild(this.$body),this.$node.appendChild(this.$noData),this.addListener("click:item",function(e){e.$item.layout.children.length&&!e.inner&&e.$item.layout.children[e.$item.layout.focusIndex].focus(),e.inner&&(t.focus(),t.focusItem(e.$item)),t.handlers[e.$item.index]&&t.handlers[e.$item.index](e.$item)})}var n=i(18),s=i(31);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.renderItemDefault=function(e,t){var i,a;if(e.ready&&this.fixedData&&!e.innerHTML.length)for(a=0;a<t.items.length;a++)"string"==typeof t.items[a].value&&(e.layout.$node.childNodes[a].innerText=t.items[a].value,e.layout.$node.childNodes[a].className=t.items[a].className);else{for(;e.firstChild;)e.removeChild(e.firstChild);i=new s({focusable:!1,data:t.items}),e.appendChild(i.$node),e.layout=i,i.parent=this,i.$parentItem=e,i.addListener("click",function(){this.parent.emit("click:item",{$item:e,inner:!0})}),t.click&&(this.handlers[e.index]=t.click),e.ready=!0}e.value=t.value||{}},a.prototype.setData=function(e){n.prototype.setData.call(this,e),e.data&&e.data.length?this.$noData.classList.add("hidden"):this.$noData.classList.remove("hidden")},a.prototype.init=function(e){var t;n.prototype.init.call(this,e),e.noData&&(this.$noData.innerHTML="",e.noData instanceof Element?this.$noData.appendChild(e.noData):"string"==typeof e.noData&&(t=document.createElement("div"),t.innerText=e.noData,this.$noData.appendChild(t)))},a.prototype.renderItem=a.prototype.renderItemDefault,e.exports=a},function(e,t,i){"use strict";function a(e){var t;e=e||{},this.size=1,this.main=!1,this.index=0,e.className="panelEx "+(e.className||""),e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),e.size&&(this.size=e.size,this.$node.classList.add("size"+e.size)),e.main&&(this.main=!0,this.$node.classList.add("main")),this.$shadow={left:document.createElement("div"),right:document.createElement("div")},this.$shadow.left.className="shadow left",this.$node.appendChild(this.$shadow.left),this.$shadow.right.className="shadow right",this.$node.appendChild(this.$shadow.right),e.title&&(this.$title=document.createElement("div"),this.$title.className="title",this.$title.innerText=e.title,this.$node.appendChild(this.$title)),this.$node.appendChild(this.$body),t=document.createElement("div"),t.className="overlay",this.$node.appendChild(t)}var n=i(1);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.defaultEvents={focus:function(){this.children.length&&this.children[0].focus()}},a.prototype.focus=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),this.parent.panels[this.parent.focusIndex].$node.classList.remove("top"),n.prototype.focus.call(this),this.parent.focusIndex=this.index,this.$node.classList.add("active"),this.$node.classList.add("top"),0===this.index&&this.parent.panels[1]&&this.parent.panels[1].main?(this.parent.panels[1].$node.classList.remove("position-left"),this.parent.panels[1].$node.classList.add("position-right"),this.parent.panels[2]&&this.parent.panels[2].$node.classList.remove("expand"),this.$node.classList.add("expand")):2===this.index&&this.parent.panels[1].main&&(this.parent.panels[1].$node.classList.remove("position-right"),this.parent.panels[1].$node.classList.add("position-left"),this.parent.panels[0].$node.classList.remove("expand"),this.$node.classList.add("expand"))},a.prototype.blur=function(){this.parent.panels[this.parent.focusIndex].$node.classList.remove("active"),n.prototype.blur.call(this)},e.exports=a},function(e,t,i){"use strict";function a(e){function t(e){switch(e.code){case s.left:a.focusIndex>0&&a.panels[a.focusIndex-1].focus();break;case s.right:a.focusIndex<a.panels.length-1&&a.panels[a.focusIndex+1].focus()}}var i,a=this;for(e=e||{},e.focusable=e.focusable||!1,e.className="panelSet "+(e.className||""),n.call(this,e),this.panels=e.panels,this.focusIndex=0,e.panels&&!e.panels[0].main&&(e.panels[0].$node.classList.add("left"),e.panels[0].$node.classList.add("expand")),e.panels&&e.panels[1]&&e.panels[1].main&&e.panels[1].$node.classList.add("position-right"),e.panels&&e.panels[2]&&e.panels[1].main&&e.panels[2].$node.classList.add("right"),e.panels&&this.add.apply(this,e.panels),i=0;i<this.panels.length;i++)this.panels[i].addListeners({keydown:t}),this.panels[i].index=i}var n=i(1),s=i(2);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.drawShadow=function(){var e,t,i;for(e=0;e<this.panels.length;e++)e>0&&(this.panels[e].$node.classList.add("leftShadow"),t=this.panels[e-1].$node.offsetHeight,i=this.panels[e-1].$node.offsetTop-this.panels[e].$node.offsetTop,this.panels[e].$node.offsetHeight>t?(this.panels[e].$shadow.left.style.height=this.panels[e-1].$node.offsetHeight+"px",this.panels[e].$shadow.left.style.top=i+"px"):this.panels[e].$shadow.left.style.height=this.panels[e].$node.offsetHeight+"px"),e<this.panels.length-1&&(this.panels[e].$node.classList.add("rightShadow"),t=this.panels[e+1].$node.offsetHeight,i=this.panels[e+1].$node.offsetTop-this.panels[e].$node.offsetTop,this.panels[e].$node.offsetHeight>t?(this.panels[e].$shadow.right.style.height=this.panels[e-1].$node.offsetHeight+"px",this.panels[e].$shadow.right.style.top=i+"px"):this.panels[e].$shadow.right.style.height=this.panels[e].$node.offsetHeight+"px")},a.prototype.focus=function(){n.prototype.focus.call(this),this.panels[this.focusIndex].focus()},a.prototype.blur=function(){this.panels[this.focusIndex].blur()},e.exports=a},function(e,t){"use strict";var i={};i={session:{token:"Bearer 2173.4591c9d87993c9c3ad60c6018979944c",userId:"2048"},convert:function(e){return!e||0>e?"n/a":e>1073741824?Math.floor(e/1024/1024/1024*100)/100+" "+gettext("GB"):e>1048576?Math.floor(e/1024/1024*100)/100+" "+gettext("MB"):e>1024?Math.floor(e/1024*100)/100+" "+gettext("KB"):e+" "+gettext("B")},parseDate:function(e){var t=[gettext("Jan"),gettext("Feb"),gettext("Mar"),gettext("Apr"),gettext("May"),gettext("Jun"),gettext("Jul"),gettext("Aug"),gettext("Sep"),gettext("Oct"),gettext("Nov"),gettext("Dec")],i=e.getDate(),a=e.getMonth(),n=e.getMinutes(),s=e.getHours();return i+" "+t[a]+" "+(s>9?s:"0"+s)+":"+(n>9?n:"0"+n)},dates:{hours:function(){var e,t=[];for(e=0;23>=e;e++)t.unshift(10>e?"0"+e:String(e));return t}(),minutes:function(){var e,t=[];for(e=0;59>=e;e++)t.unshift(10>e?"0"+e:String(e));return t}(),days:function(){var e,t=[];for(e=1;31>=e;e++)t.unshift(10>e?"0"+e:String(e));return t}(),months:function(){var e,t=[];for(e=1;12>=e;e++)t.unshift(10>e?"0"+e:String(e));return t}(),years:[String((new Date).getFullYear()),String((new Date).getFullYear()+1)]}},e.exports=i},function(e,t){"use strict";var i={};i.tag=function(e,t,i){var a,n,s=null;if(e){if(s=document.createElement(e),t&&"object"==typeof t)for(n in t)s[n]=t[n];for(a=2;a<arguments.length;a++)arguments[a]&&s.appendChild("object"==typeof arguments[a]?arguments[a]:document.createTextNode(arguments[a]))}return s},i.fragment=function(e){var t,i=document.createDocumentFragment();for(t=0;t<arguments.length;t++)e=arguments[t],e&&i.appendChild("object"==typeof e?e:document.createTextNode(e));return i},i.add=function(e,t){var i;if(e instanceof Node){for(i=1;i<arguments.length;i++)arguments[i]&&e.appendChild("object"==typeof arguments[i]?arguments[i]:document.createTextNode(arguments[i]));return e}return null},i.remove=function(e){var t,i=0;for(t=0;t<arguments.length;t++)arguments[t]&&arguments[t].parentNode&&arguments[t].parentNode.removeChild(arguments[t])===arguments[t]&&i++;return arguments.length>0&&i===arguments.length},e.exports=i},function(e,t,i){"use strict";function a(e){e=e||{},e.className="button "+(e.className||""),n.call(this,e),e.icon&&(this.$icon=this.$body.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),this.$text=this.$body.appendChild(document.createElement("div")),this.$text.classList.add("text"),e.value&&(this.$text.innerText=e.value)}var n=i(1),s=i(2);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.clickDuration=200,a.prototype.defaultEvents={click:function(){var e=this;this.$node.classList.add("click"),setTimeout(function(){e.$node.classList.remove("click")},this.clickDuration)},keydown:function(e){e.code===s.ok&&this.events.click&&this.emit("click",{event:e})}},e.exports=a},function(e,t,i){"use strict";function a(e){var t;e=e||{},e.focusable=e.focusable||!1,e.className="modalMessage "+(e.className||""),e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.$node.appendChild(document.createElement("div")),this.$node.firstChild.classList.add("alignBox"),this.$node.firstChild.appendChild(document.createElement("div")),this.$header=document.createElement("div"),this.$header.className="header",this.$text=this.$header.appendChild(document.createElement("div")),this.$text.classList.add("text"),this.$text.innerText=e.title||"",e.icon&&(this.$icon=this.$header.appendChild(document.createElement("div")),this.$icon.className="icon "+e.icon),t=document.createElement("div"),t.className="overlay",this.$node.firstChild.firstChild.appendChild(this.$header),this.$node.firstChild.firstChild.appendChild(this.$body),this.$node.firstChild.firstChild.appendChild(t)}var n=i(1);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.focus=function(){this.$node.classList.add("active"),n.prototype.focus.call(this),this.children[0]&&this.children[0]instanceof n&&this.children[0].focus()},a.prototype.blur=function(){this.$node.classList.remove("active"),n.prototype.blur.call(this)},e.exports=a},function(e,t,i){"use strict";function a(e){e=e||{},this.viewSize=10,this.realSize=100,this.value=0,this.type=this.TYPE_VERTICAL,this.thumbRect=null,this.trackRect=null,e.focusable=e.focusable||!1,e.className="scrollBar "+(e.className||""),e.type&&(this.type=e.type),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),n.call(this,e),this.$thumb=this.$body.appendChild(document.createElement("div")),this.$thumb.className="thumb",this.init(e)}var n=i(1);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.TYPE_VERTICAL=1,a.prototype.TYPE_HORIZONTAL=2,a.prototype.init=function(e){e=e||{},void 0!==e.realSize&&(this.realSize=e.realSize),void 0!==e.viewSize&&(this.viewSize=e.viewSize),this.viewSize>=this.realSize?this.$thumb.classList.add("hidden"):this.$thumb.classList.remove("hidden"),void 0!==e.value&&this.scrollTo(e.value),this.type===this.TYPE_VERTICAL?this.$thumb.style.height=this.viewSize/this.realSize*100+"%":this.$thumb.style.width=this.viewSize/this.realSize*100+"%",this.thumbRect=this.$thumb.getBoundingClientRect(),this.trackRect=this.$node.getBoundingClientRect()},a.prototype.scrollTo=function(e){return this.value!==e?(0!==this.thumbRect.height&&0!==this.thumbRect.width||(this.trackRect=this.$node.getBoundingClientRect(),this.thumbRect=this.$thumb.getBoundingClientRect()),this.type===this.TYPE_VERTICAL?this.$thumb.style.marginTop=(this.trackRect.height-this.thumbRect.height)*e/(this.realSize-this.viewSize)+"px":this.$thumb.style.marginLeft=(this.trackRect.width-this.thumbRect.width)*e/(this.realSize-this.viewSize)+"px",this.events.change&&this.emit("change",{curr:e,prev:this.value}),e>=this.realSize&&(e=this.realSize,this.events.done&&this.emit("done")),this.value=e,!0):!1},e.exports=a},function(e,t,i){"use strict";function a(){d.length&&core.stalker.request("recordings",{version:3,method:"GET",onload:function(e,t){var i,a,n,s;if(e);else{try{i=t.data}catch(e){i=[]}for(a=0;a<i.length;a++)c[i[a].id]&&(n=c[i[a].id],2===o[i[a].status]&&(s=Math.ceil(((new Date).getTime()/1e3-i[a].start_time)/(i[a].end_time-i[a].start_time)*100),s=0>s?0:s,s=s>100?100:s,s!==n.data.progress&&(n.data.progress=s,d[d.indexOf(n)].data.progress=s,r.events.progress&&r.emit("progress",{item:n,time:(new Date).getTime()}))),o[i[a].status]!==n.data.state&&(n.data.state=o[i[a].status],d[d.indexOf(n)].data.state=o[i[a].status],r.events.state&&r.emit("state",{item:n,time:(new Date).getTime()})))}},onerror:function(e){}})}var n,s=i(35),o={0:1,1:2,2:4},r=new s,l=5e3,d=[],c={};window.svr=r,window.svrhash=c,r.errorCodes={"-1":"Wrong channel id.","-2":"Server error.","-3":"Wrong server record object."},r.add=function(e,t){var i;if("function"==typeof t){if(!e.id)return void t({code:"-1",message:r.errorCodes[-1]});i={ch_id:e.id},e.startTime&&(i.start_time=e.startTime),e.endTime&&(i.end_time=e.endTime),core.stalker.request("recordings",{version:3,method:"POST",body:JSON.stringify(i),onload:function(e,i){var a,n;if(e){try{i=JSON.parse(i).message}catch(o){i=o}t({code:"-2",message:r.errorCodes[-2]})}else a=i.data,n=new s,n.data={id:a.id,state:1,url:"",path:"",channel:a.ch_name,channelId:a.ch_id,name:a.name,startTime:a.start_time,endTime:a.end_time,progress:0,server:!0,_downloadable:a.downloadable},c[n.data.id]=n,d.push(n),r.events.add&&r.emit("add",{item:n,time:(new Date).getTime()}),t(null,!0)},onerror:function(){}})}},r.add.toString=function(){return"function add() { [native code] }"},r.remove=function(e,t){return"function"==typeof t?e&&e instanceof s?void core.stalker.request("recordings/"+e.data.id,{version:3,method:"DELETE",onload:function(i,a){if(i){try{a=JSON.parse(a).message}catch(n){a=n}t({code:"-2",message:r.errorCodes[-2]})}else a&&a.data&&!a.error?(delete c[e.data.id],d.splice(d.indexOf(e),1),r.events.remove&&r.emit("remove",{item:e,time:(new Date).getTime()}),t(null,!0)):t({code:"-2",message:r.errorCodes[-2]})},onerror:function(){}}):void t({code:"-3",message:r.errorCodes[-3]}):void 0},r.remove.toString=function(){return"function remove() { [native code] }"},r.getFileUrl=function(e,t){return"function"==typeof t?e&&e instanceof s?void core.stalker.request("recordings/"+e.data.id+"/link",{version:3,method:"GET",onload:function(e,i){if(e){try{i=JSON.parse(i).message}catch(a){i=a}t({code:"-2",message:r.errorCodes[-2]})}else i.data&&i.data.url?t(null,{url:i.data.url}):t({code:"-2",message:r.errorCodes[-2]})},onerror:function(){}}):void t({code:"-3",message:r.errorCodes[-3]}):void 0},r.remove.toString=function(){return"function remove() { [native code] }"},r.restore=function(){core.stalker.request("recordings",{version:3,method:"GET",onload:function(e,t){var i,a,n;if(e);else{try{i=t.data}catch(e){i=[]}for(a=0;a<i.length;a++)c[i[a].id]||(n=new s,n.data={id:i[a].id,state:o[i[a].status],url:"",path:"",channel:i[a].ch_name,channelId:i[a].ch_id,name:i[a].name,startTime:i[a].start_time,endTime:i[a].end_time,progress:4===o[i[a].status]?100:0,server:!0,_downloadable:i[a].downloadable},c[n.data.id]=n,d.push(n),r.events.add&&r.emit("add",{item:n,time:(new Date).getTime()}))}},onerror:function(){}})},r.restore.toString=function(){return"function restore() { [native code] }"},Object.defineProperties(r,{list:{get:function(){return d},set:function(){}},updateInterval:{get:function(){return l},set:function(e){l=e,clearInterval(n),n=setInterval(a,l)}}}),a(),n=setInterval(a,l),e.exports=function(){return r}},function(e,t,i){"use strict";function a(e){e=e||{},this.value="",this.type=this.TYPE_TEXT,e.className="input "+(e.className||""),e.maxlength=e.maxlength||0,this.autoKeyboard=!0,"undefined"!=typeof e.autoKeyboard&&(this.autoKeyboard=!!e.autoKeyboard),n.call(this,e),this.$line=this.$body.appendChild(document.createElement("div")),this.$line.className="line",this.$caret=this.$line.appendChild(document.createElement("div")),this.$caret.className="caret",this.$placeholder=this.$line.appendChild(document.createElement("div")),this.$placeholder.className="placeholder",this.$caret.index=0,this.init(e),this.autoKeyboard&&(this.addListener("focus",function(){var e=this.$node.getBoundingClientRect();screen.height/2>e.top+e.height?stbWindowMgr.SetVirtualKeyboardCoord("none",e.left,e.top+e.height):stbWindowMgr.SetVirtualKeyboardCoord("none",e.left,e.top-e.height/4-o.data.metrics.keyboardHeight),gSTB.ShowVirtualKeyboard()}),this.addListener("blur",function(){gSTB.IsVirtualKeyboardActive()&&gSTB.HideVirtualKeyboard()}))}var n=i(1),s=i(2),o=i(5);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.TYPE_TEXT=0,a.prototype.TYPE_PASSWORD=1,a.prototype.defaultEvents={keypress:function(e){this.addChar(String.fromCharCode(e.keyCode),this.$caret.index)},keydown:function(e){switch(e.code){case s["delete"]:this.removeChar(this.$caret.index);break;case s.back:this.removeChar(this.$caret.index-1);break;case s.left:this.setCaretPosition(this.$caret.index-1);break;case s.right:this.setCaretPosition(this.$caret.index+1);break;case s.end:case s.down:this.setCaretPosition(this.value.length);break;case s.home:case s.up:this.setCaretPosition(0)}}},a.prototype.init=function(e){e.type&&(this.type=e.type),e.value&&this.setValue(e.value),e.placeholder&&(this.$placeholder.innerText=e.placeholder),this.maxlength=e.maxlength,this.$line.dir=e.direction||"ltr"},a.prototype.addChar=function(e,t){var i=document.createElement("div");t=void 0===t?this.$caret.index:t,0===this.value.length&&this.$line.removeChild(this.$placeholder),(!this.maxlength||t<=this.maxlength)&&(i.className="char",this.value=this.value.substring(0,t)+e+this.value.substring(t,this.value.length),++this.$caret.index,this.type===this.TYPE_PASSWORD?i.innerText="*":" "===e?i.innerHTML="&nbsp;":i.innerText=e,t>=this.value.length?(this.$line.appendChild(i),this.$line.appendChild(this.$caret)):(this.$line.insertBefore(this.$caret,this.$line.children[t]),this.$line.insertBefore(i,this.$caret)),this.events.input&&this.emit("input",{value:this.value}))},a.prototype.removeChar=function(e){var t=this.value;e=void 0===e?this.$caret.index-1:e,this.value.length>0&&(this.$caret.index===e&&e<this.value.length?this.$line.removeChild(this.$line.children[e+1]):this.$caret.index>e&&(--this.$caret.index,this.$line.removeChild(this.$line.children[e])),this.value=this.value.substring(0,e)+this.value.substring(e+1,this.value.length),this.events.input&&t!==this.value&&this.emit("input",{value:this.value})),0===this.value.length&&this.$line.appendChild(this.$placeholder)},a.prototype.setCaretPosition=function(e){e>=0&&e<=this.value.length&&this.$caret.index!==e&&(this.$line.removeChild(this.$caret),e===this.value.length?this.$line.appendChild(this.$caret):this.$line.insertBefore(this.$caret,this.$line.children[e]),this.$caret.index=e)},a.prototype.setValue=function(e){var t,i,a=this.value.length,n=e.length,s=0;if(e!==this.value){if(n>0){if(this.$placeholder.parentNode===this.$line&&this.$line.removeChild(this.$placeholder),this.$line.removeChild(this.$caret),n!==a)if(i=n-a,i>0)for(s=0;i>s;s++)t=this.$line.appendChild(document.createElement("div")),t.className="char";else for(s=0;s>i;s--)this.$line.removeChild(this.$line.lastChild);for(s=0;n>s;s++)t=this.$line.children[s],this.type===this.TYPE_PASSWORD?t.innerHTML="*":" "===e[s]?t.innerHTML="&nbsp;":t.innerText=e[s];this.value=e,this.$caret.index=n,this.$line.appendChild(this.$caret)}else this.value="",this.$line.innerText="",this.$line.appendChild(this.$caret),this.$line.appendChild(this.$placeholder),this.$caret.index=0;this.events.input&&this.emit("input",{value:this.value})}},e.exports=a},function(e,t,i){"use strict";function a(e){e=e||{},this.$focusItem=null,this.viewIndex=null,this.data=[],this.type=this.TYPE_VERTICAL,this.size=5,this.cycle=!1,this.scroll=null,e.type&&(this.type=e.type),this.provider=null,e.className="list "+(e.className||""),this.type===this.TYPE_HORIZONTAL&&(e.className+=" horizontal"),s.call(this,e),this.init(e)}function n(e){var t,i;for(t=0;t<e.length;t++)i=e[t],"object"!=typeof i&&(i=e[t]={value:e[t]});return e}var s=i(1),o=i(2);a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.TYPE_VERTICAL=1,a.prototype.TYPE_HORIZONTAL=2,a.prototype.renderItemDefault=function(e,t){e.innerText=t.value},a.prototype.renderItem=a.prototype.renderItemDefault,a.prototype.defaultEvents={mousewheel:function(e){this.type===this.TYPE_VERTICAL&&e.wheelDeltaY&&this.move(e.wheelDeltaY>0?o.up:o.down),this.type===this.TYPE_HORIZONTAL&&e.wheelDeltaX&&this.move(e.wheelDeltaX>0?o.left:o.right)},keydown:function(e){switch(e.code){case o.up:case o.down:case o.right:case o.left:case o.pageUp:case o.pageDown:case o.home:case o.end:this.move(e.code);break;case o.ok:this.events["click:item"]&&this.$focusItem&&this.emit("click:item",{$item:this.$focusItem,event:e})}}},a.prototype.init=function(e){var t,i,a=this,n=this.$body.children.length,s=function(e){this.data&&(a.focusItem(this),a.events["click:item"]&&a.emit("click:item",{$item:this,event:e}))};if(void 0!==e.cycle&&(this.cycle=e.cycle),e.scroll&&(this.scroll=e.scroll),e.provider&&(this.provider=e.provider),e.render&&(this.renderItem=e.render),e.size&&(this.size=e.size),this.size!==n)for(n>0&&(this.$body.innerText=null),i=0;i<this.size;i++)t=document.createElement("div"),t.index=i,t.className="item",t.addEventListener("click",s),this.$body.appendChild(t);void 0!==e.viewIndex,this.viewIndex=null,this.provider?this.provider.get(null,function(t,i){t?a.events["data:error"]&&a.emit("data:error",t):(i&&(e.data=i,a.setData(e),a.scroll&&a.scroll.init({realSize:a.provider.maxCount,viewSize:a.provider.size,value:a.provider.head+a.provider.pos})),a.events["data:get"]&&a.emit("data:get"))}):e.data&&this.setData(e)},a.prototype.setData=function(e){e.data&&(this.data=n(e.data)),this.viewIndex=null,this.$focusItem&&this.blurItem(this.$focusItem),this.scroll&&!this.provider&&this.scroll.init({realSize:this.data.length,viewSize:this.size,value:e.viewIndex||0}),void 0!==e.focusIndex&&this.data.length?this.focusIndex(e.focusIndex):this.renderView(e.viewIndex||0)},a.prototype.renderView=function(e){var t,i,a,n,s;if(this.viewIndex!==e){for(n=this.viewIndex,this.viewIndex=s=e,i=0;i<this.size;i++)t=this.$body.children[i],
a=this.data[e],a?(t.data=a,t.index=e,this.renderItem(t,a),a.mark?t.classList.add("mark"):t.classList.remove("mark")):(t.data=t.index=void 0,t.innerHTML="&nbsp;",t.ready=!1),e++;return this.events["move:view"]&&this.emit("move:view",{prevIndex:n,currIndex:s}),this.events["select:item"]&&this.emit("select:item",{$item:t}),this.scroll&&this.scroll.scrollTo(this.provider?this.provider.head+this.provider.pos:this.viewIndex),!0}return!1},a.prototype.move=function(e){var t=this,i=!1;if(this.data.length)switch(e){case o.left:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case o.up:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index>0?this.$focusItem===this.$body.firstChild?this.renderView(this.viewIndex-1):this.focusItem(this.$focusItem.previousSibling):this.provider?this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0===a?a:t.$focusItem.index})}):(this.cycle&&this.move(o.end),this.events.overflow&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case o.right:if(this.type!==this.TYPE_HORIZONTAL)break;i=!0;case o.down:(i||this.type===this.TYPE_VERTICAL)&&(this.$focusItem&&this.$focusItem.index<this.data.length-1?this.$focusItem===this.$body.lastChild?this.renderView(this.viewIndex+1):this.focusItem(this.$focusItem.nextSibling):this.provider?this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0===a?a:t.$focusItem.index})}):(this.cycle&&this.move(o.home),this.events.overflow&&this.emit("overflow",{direction:e,cycle:this.cycle})));break;case o.pageUp:if(this.provider)return void this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a?a:0})});this.viewIndex<this.size?this.renderView(0):this.renderView(this.viewIndex-this.size+1),this.focusItem(this.$body.firstChild);break;case o.pageDown:if(this.provider){this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0===a?a:i.length<t.size?i.length-1:t.size-1})});break}this.data.length>this.size?(this.viewIndex>this.data.length-2*this.size?this.renderView(this.data.length-this.size):this.renderView(this.viewIndex+this.size-1),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1]);break;case o.home:if(this.provider){this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a?a:0})});break}this.renderView(0),this.focusItem(this.$body.firstChild);break;case o.end:if(this.provider){this.provider.get(e,function(e,i,a){e?t.events["data:error"]&&t.emit("data:error",e):i&&t.setData({data:i,focusIndex:a||0===a?a:i.length<t.size?i.length-1:t.size-1})});break}this.data.length>this.size?(this.renderView(this.data.length-this.size),this.focusItem(this.$body.lastChild)):this.focusItem(this.$body.children[this.data.length-1])}},a.prototype.focusItem=function(e){var t=this.$focusItem;return e&&t!==e?(null!==t&&(t.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:t})),this.$focusItem=e,this.$focusItem.data=this.data[this.$focusItem.index],e.classList.add("focus"),this.events["focus:item"]&&this.emit("focus:item",{$prev:t,$curr:e}),this.events["select:item"]&&this.emit("select:item",{$item:e}),!0):!1},a.prototype.blurItem=function(e){return e?(e===this.$focusItem&&(this.$focusItem=null),e.classList.remove("focus"),this.events["blur:item"]&&this.emit("blur:item",{$item:e}),!0):!1},a.prototype.focusIndex=function(e){var t=this.viewIndex||0;e>=t+this.size?(e=e<this.data.length-1?e:this.data.length-1,this.renderView(e-this.size+1),this.focusItem(this.$body.lastChild)):t>e?(e=e>0?e:0,this.renderView(e),this.focusItem(this.$body.firstChild)):(null===this.viewIndex&&this.renderView(0),this.focusItem(this.$body.children[e-t]))},a.prototype.markItem=function(e,t){t?e.classList.add("mark"):e.classList.remove("mark"),e.data.mark=t},e.exports=a},function(e,t,i){"use strict";function a(e){var t=this;this.group="group "+o++,this.$checkedData=null,e.className="radioList "+(e.className||""),n.call(this,e),this.addListener("click:item",function(e){var i=e.$item;i.checkBox.set(!0),i.state=i.checkBox.value,i.data.state=i.checkBox.value,t.$checkedData!==i.data&&(t.emit("select",{$last:t.$checkedData,$curr:i}),t.$checkedData.state=!1,t.$checkedData=i.data)})}var n=i(18),s=i(29),o=0;a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.group=0,a.prototype.renderItemDefault=function(e,t){var i=document.createElement("table"),a=document.createElement("tr"),n=document.createElement("td"),o=new s({group:this.group});e.innerHTML="",t.state&&o.set(!0),i.appendChild(a),n.appendChild(o.$node),n.className="checkBoxWrapper",a.appendChild(n),n=document.createElement("td"),n.className="title",n.innerText=t.title||"",a.appendChild(n),e.checkBox=o,e.state=o.value,e.value=t.value,e.appendChild(i)},a.prototype.setData=function(e){var t;for(n.prototype.setData.call(this,e),t=0;t<this.data.length;t++)if(this.data[t].state){this.$checkedData=this.data[t];break}},a.prototype.renderItem=a.prototype.renderItemDefault,e.exports=a},function(e,t,i){"use strict";function a(e){e=e||{},e.className=" scrollArea "+(e.className||""),e.$body=document.createElement("div"),e.$body.className="body",this.step=5,this.realHeight=0,this.viewHeight=0,this.topPosition=0,this.scroll=null,n.call(this,e),this.$node.appendChild(this.$body),this.init(e)}var n=i(1),s=i(5),o=i(2);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.defaultEvents={keydown:function(e){switch(e.code){case o.up:case o.down:this.move(e.code)}}},a.prototype.move=function(e){if(!(this.realHeight<=this.viewHeight))switch(e){case o.down:if(this.topPosition-this.step*s.data.metrics.height/100<this.viewHeight-this.realHeight)return this.topPosition=this.viewHeight-this.realHeight,this.$body.style.top=this.topPosition+"px",this.emit("overflow",{direction:e}),void(this.scroll&&this.scroll.scrollTo(-this.topPosition));this.topPosition-=this.step*s.data.metrics.height/100,this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px";break;case o.up:if(this.topPosition+this.step*s.data.metrics.height/100>0)return this.topPosition=0,this.$body.style.top=this.topPosition+"px",this.emit("overflow",{direction:e}),void(this.scroll&&this.scroll.scrollTo(-this.topPosition));this.topPosition+=this.step*s.data.metrics.height/100,this.scroll&&this.scroll.scrollTo(-this.topPosition),this.$body.style.top=this.topPosition+"px"}},a.prototype.init=function(e){e=e||{},this.realHeight=this.$body.offsetHeight,this.viewHeight=this.$node.offsetHeight,this.topPosition=0,this.$body.style.top=this.topPosition+"px",e.scroll&&(this.scroll=e.scroll),e.step&&(this.step=e.step),this.scroll&&this.scroll.init({realSize:this.realHeight,viewSize:this.viewHeight,value:this.topPosition})},e.exports=a},function(e,t,i){"use strict";var a="pageAdd",n=i(5),s=i(4),o=i(32),r=i(3),l=new s({$node:document.getElementById(a)}),d=i(10),c=i(9),h=i(8),u=i(14),p=i(19),m=i(13),f=i(17),v=i(12),g=i(2),y=i(11),w=i(7),x=i(16)(),$=core.plugins.pvr,b={"-1":gettext("Wrong record parameters."),"-2":gettext("Not enough memory."),"-3":gettext("Wrong recording range (start or end time). e.i. recording duration must be less or equal than 24 hours."),"-4":gettext("Task with specified ID was not found."),"-5":gettext("Wrong file name. Folder where you want to save recording must exist."),"-6":gettext("Duplicate tasks. Recording with that file name already exists."),"-7":gettext("Error opening stream URL."),"-8":gettext("Error opening output file."),"-9":gettext("Maximum number of simultaneous recording is exceeded."),"-10":gettext("Manager got end of stream and recording has finished earlier keeping the recorded file."),"-11":gettext("Error writing output file. E.i. disk is full or has been disconnected during recording."),"-12":gettext("Wrong record url."),"-13":gettext("Wrong file name."),"-14":gettext("Wrong record start time."),"-15":gettext("Wrong record end time."),"-16":gettext("Bad record.")},k={"-1":gettext("Wrong channel id."),"-2":gettext("Server error."),"-3":gettext("Bad record.")};window.apage=l,l.addListener("load",function(){function e(e){o.prototype.defaultEvents.keydown.call(this,e),e.code===g.ok&&this.parent.emit("click")}function t(e){e.children.length>1?e.children[1].innerText=this.current?this.current.value:0:(e.appendChild(v.tag("div",{className:"pointerWrapper"},v.tag("div",{className:"pointer header"}))),e.appendChild(v.tag("div",{className:"text"},this.current?this.current.value:0)),e.appendChild(v.tag("div",{className:"pointerWrapper"},v.tag("div",{className:"pointer bottom"}))))}function i(e,t){return t.indexOf(10>e?"0"+e:""+e)}l.clock=new w,l.add(l.clock),l.modalSelectDevice=new u({title:gettext("devices"),className:"modalSelectDevice",visible:!1,events:{show:function(){var e,t=n.intent?n.intent.data.pvr.local:!0,i=n.intent?n.intent.data.pvr.server:!0,a=i?[{state:!0,title:gettext("Server"),value:"Server"}]:[],s=0;if(t)for(e=0;e<n.storages.length;e++)a.push({state:!1,title:n.storages[e].label,value:n.storages[e]}),l.currStorage&&l.currStorage.sn===n.storages[e].sn&&(a[0].state=!1,a[a.length-1].state=!0,s=Number(a.length-1));this.children[0].init({data:a,size:a.length,focusIndex:s}),this.focus()}},children:[new p({cycle:!0,focusIndex:0,size:3,data:[],events:{"click:item":function(e){l.modalSelectDevice.hide(),l.panelSet.reset({storage:e.$item.data.value}),l.panelSet.focus()},keydown:function(e){p.prototype.defaultEvents.keydown.call(this,e),e.code===g.back&&(e.stop=!0,l.modalSelectDevice.hide(),l.panelSet.reset(),l.panelSet.focus())}}})]}),l.add(l.modalSelectDevice),l.panelAdd=new c({title:gettext("new record"),main:!0,visible:!0,className:"panelAdd"}),l.panelAdd.add(l.panelAdd.list=new h({focusIndex:0,size:5,events:{overflow:function(){l.panelAdd.list.$focusItem.classList.remove("focus"),l.panelAdd.button.focus()},keydown:function(e){h.prototype.defaultEvents.keydown.call(this,e)}},data:[{items:[{className:"item name",value:gettext("Channel:")},{className:"item text disabledText",value:""}]},{items:[{className:"item name",value:gettext("Start time:")},l.panelAdd.startHour=new o({data:y.dates.hours.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:":"},l.panelAdd.startMinute=new o({data:y.dates.minutes.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:" "},l.panelAdd.startDay=new o({data:y.dates.days.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:"/"},l.panelAdd.startMonth=new o({data:y.dates.months.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:"/"},l.panelAdd.startYear=new o({data:y.dates.years.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"lastPadding",value:" "}]},{items:[{className:"item name",value:gettext("End time:")},l.panelAdd.endHour=new o({data:y.dates.hours.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:":"},l.panelAdd.endMinute=new o({data:y.dates.minutes.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:" "},l.panelAdd.endDay=new o({data:y.dates.days.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:"/"},l.panelAdd.endMonth=new o({data:y.dates.months.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"separator",value:"/"},l.panelAdd.endYear=new o({data:y.dates.years.slice(),cycle:!0,events:{keydown:e},render:t}),{className:"lastPadding",value:" "}]},{items:[{className:"item name",value:gettext("Storage:")},{className:"item text",value:gettext("Recording not allowed")}],click:function(){var e=n.intent?n.intent.data.pvr.local:!0,t=n.intent?n.intent.data.pvr.server:!0;(n.storages.length&&e||t)&&(l.panelSet.blur(),l.modalSelectDevice.show(),l.panelSet.visible=!1)}},{items:[{className:"item name",value:gettext("File name:")},l.panelAdd.input=new f({className:"item text",events:{keydown:function(e){switch(f.prototype.defaultEvents.keydown.call(this,e),e.code){case g.back:e.stop=!0;break;case g.ok:this.parent.emit("click")}}}})]}]})),l.panelAdd.add(l.panelAdd.button=new m({value:gettext("Create"),className:"bottom",$node:l.panelAdd.$node.appendChild(document.createElement("div")),events:{click:function(){var e,t=n.intent?n.intent.data.name:"",i=n.intent?n.intent.data.uri:"",a=n.intent?n.intent.data.id:"";l.currStorage.label?(e=l.currStorage.mountPath+"/records/"+t+"/",e+=l.panelAdd.startYear.current.value+"-"+l.panelAdd.startMonth.current.value+"-",e+=l.panelAdd.startDay.current.value+"/"+l.panelAdd.input.value+".ts",$.add({name:e,channel:i,startTime:Math.ceil(new Date(l.panelAdd.startYear.current.value,l.panelAdd.startMonth.current.value,l.panelAdd.startDay.current.value,l.panelAdd.startHour.current.value,l.panelAdd.startMinute.current.value).getTime()/1e3),endTime:Math.ceil(new Date(l.panelAdd.endYear.current.value,l.panelAdd.endMonth.current.value,l.panelAdd.endDay.current.value,l.panelAdd.endHour.current.value,l.panelAdd.endMinute.current.value).getTime()/1e3)},function(e){e?core.notify({title:b[e.code],icon:"alert",type:"warning"}):(n.intent&&(n.intent.close(),n.intent=null),r.navigate("pageMain"))})):"Server"===l.currStorage?x.add({id:a,startTime:Math.ceil(new Date(l.panelAdd.startYear.current.value,l.panelAdd.startMonth.current.value,l.panelAdd.startDay.current.value,l.panelAdd.startHour.current.value,l.panelAdd.startMinute.current.value).getTime()/1e3),endTime:Math.ceil(new Date(l.panelAdd.endYear.current.value,l.panelAdd.endMonth.current.value,l.panelAdd.endDay.current.value,l.panelAdd.endHour.current.value,l.panelAdd.endMinute.current.value).getTime()/1e3)},function(e){e?core.notify({title:k[e.code],icon:"alert",type:"warning"}):(n.intent&&(n.intent.close(),n.intent=null),r.navigate("pageMain"))}):null===l.currStorage?core.notify({title:gettext("Connect device"),icon:"alert",type:"warning"}):core.notify({title:gettext("Recording not allowed"),icon:"alert",type:"warning"})},keydown:function(e){e.code===g.up?(l.panelAdd.list.$focusItem.classList.add("focus"),l.panelAdd.list.focus(),l.panelAdd.list.focusIndex(l.panelAdd.list.data.length-1)):e.code===g.down?(l.panelAdd.list.$focusItem.classList.add("focus"),l.panelAdd.list.focus(),l.panelAdd.list.focusIndex(0)):e.code===g.ok&&l.panelAdd.button.events.click&&l.panelAdd.button.emit("click",{event:e})}}})),l.panelSet=new d({visible:!0,$node:document.getElementById("panelSetAdd"),focusIndex:0,panels:[l.panelAdd]}),l.panelSet.reset=function(e){var t,i,a,s=n.intent?n.intent.data.pvr.local:!0,o=n.intent?n.intent.data.pvr.server:!0;e&&e.storage&&e.storage.size&&s?(i=gettext("Free space:")+" "+y.convert(e.storage.freeSize),a=y.convert(e.storage.size),t="<span>"+e.storage.label+"</span><span>"+i+gettext(" of ")+a+"</span>",l.currStorage=e.storage):o?(t=gettext("Server"),l.currStorage="Server"):s&&n.storages.length?(i=gettext("Free space:")+" "+y.convert(n.storages[0].freeSize),a=y.convert(n.storages[0].size),t="<span>"+n.storages[0].label+"</span><span>"+i+gettext(" of ")+a+"</span>",l.currStorage=n.storages[0]):s?(t=gettext("Connect device"),l.currStorage=null):(t=gettext("Recording not allowed"),l.currStorage=void 0),l.panelAdd.list.$body.children[3].children[0].children[1].innerHTML=t?t:"",l.panelAdd.list.$focusItem.classList.add("focus"),l.panelAdd.list.focus()},l.panelSet.drawShadow(),l.add(l.panelSet),l.addListener("keydown",function(e){switch(e.code){case g.back:n.intent?(n.intent.close(),n.intent=null,r.navigate("pageMain")):r.back()}}),l.reset=function(){var e,t=n.intent?n.intent.data.name:"",a=new Date,s=new Date(a.getFullYear(),a.getMonth(),a.getDate(),23===a.getHours()?0:a.getHours()+1,a.getMinutes()),o=y.dates.minutes.slice(),r=y.dates.hours.slice(),d=y.dates.days.slice(),c=y.dates.months.slice(),h=y.dates.years.slice();n.intent&&n.intent.data.startTime&&(a.setTime(1e3*n.intent.data.startTime),s.setTime(1e3*n.intent.data.endTime)),l.panelAdd.list.$body.children[0].children[0].children[1].innerText=t,l.panelAdd.startMinute.init({data:o.slice(),index:i(a.getMinutes(),o.slice())}),l.panelAdd.startHour.init({data:r.slice(),index:i(a.getHours(),r.slice())}),l.panelAdd.startDay.init({data:d.slice(),index:i(a.getDate(),d.slice())}),l.panelAdd.startMonth.init({data:c.slice(),index:i(a.getMonth(),c.slice())}),l.panelAdd.startYear.init({data:h.slice(),index:i(a.getFullYear(),h.slice())}),l.panelAdd.endMinute.init({data:o.slice(),index:i(s.getMinutes(),o.slice())}),l.panelAdd.endHour.init({data:r.slice(),index:i(s.getHours(),r.slice())}),l.panelAdd.endDay.init({data:d.slice(),index:i(s.getDate(),d.slice())}),l.panelAdd.endMonth.init({data:c.slice(),index:i(s.getMonth(),c.slice())}),l.panelAdd.endYear.init({data:h.slice(),index:i(s.getFullYear(),h.slice())}),e=l.panelAdd.startHour.current.value+"-"+l.panelAdd.startMinute.current.value+"-",e+=a.getSeconds()<10?"0"+a.getSeconds():a.getSeconds(),l.panelAdd.input.setValue(e),l.modalSelectDevice.visible&&(l.modalSelectDevice.hide(),l.panelSet.focus()),l.panelSet.reset()},l.addListener("show",function(){l.reset(),l.panelSet.focus()})}),e.exports=l},function(e,t,i){"use strict";var a="pageInfo",n=i(4),s=i(3),o=new n({$node:document.getElementById(a)}),r=i(10),l=i(9),d=i(8),c=i(13),h=i(2),u=i(15),p=i(7),m=i(11);window.ipage=o,o.addListener("load",function(){o.clock=new p,o.add(o.clock),o.panelDetails=new l({title:gettext("About record"),main:!0,visible:!0,className:"panelDetails",children:[]}),o.panelDetails.reset=function(){var e=["",gettext("Waiting"),gettext("Running"),gettext("Error"),gettext("Completed")];o.panelDetails.list.setData({focusIndex:0,data:[{items:[{className:"item name",value:gettext("Channel:")},{className:"item text",value:o.initData.channel}]},{items:[{className:"item name",value:gettext("URL:")},{className:"item text",value:o.initData.url}]},{items:[{className:"item name",value:gettext("File name:")},{className:"item text",value:o.initData.name}]},{items:[{className:"item name",value:gettext("Start time:")},{className:"item text",value:m.parseDate(new Date(1e3*o.initData.startTime))}]},{items:[{className:"item name",value:gettext("End time:")},{className:"item text",value:m.parseDate(new Date(1e3*o.initData.endTime))}]},{items:[{className:"item name",value:gettext("Device:")},{className:"item text",value:o.initData.storage?o.initData.storage.label:gettext("Not connected")}]},{items:[{className:"item name",value:gettext("Status:")},{className:"item text",value:e[o.initData.state]}]}]}),o.panelDetails.scroll.init({realSize:7,viewSize:6}),o.panelDetails.$node.classList.add("disabled"),o.panelDetails.focus(),o.panelDetails.list.$focusItem&&(o.panelDetails.list.$focusItem.classList.remove("focus"),o.panelDetails.scroll.hide()),o.panelDetails.button.focus()},o.panelDetails.scroll=new u({}),o.panelDetails.add(o.panelDetails.list=new d({focusIndex:0,size:6,scroll:o.panelDetails.scroll,events:{overflow:function(e){o.panelDetails.list.$focusItem.classList.remove("focus"),o.panelDetails.scroll.hide(),o.panelDetails.button.focus()},"click:item":function(e){o.panelDetails.list.$focusItem&&s.navigate("pageMore",e)},keydown:function(e){d.prototype.defaultEvents.keydown.call(this,e)}},data:[]}),o.panelDetails.scroll),o.panelDetails.add(o.panelDetails.button=new c({value:gettext("Close"),className:"bottom",$node:o.panelDetails.$node.appendChild(document.createElement("div")),events:{click:function(){s.navigate("pageMain")},keydown:function(e){e.code===h.up?(o.panelDetails.list.focus(),o.panelDetails.scroll.show(),o.panelDetails.list.$focusItem.classList.add("focus"),o.panelDetails.list.focusIndex(o.panelDetails.list.data.length-1)):e.code===h.down?(o.panelDetails.list.focus(),o.panelDetails.scroll.show(),o.panelDetails.list.$focusItem.classList.add("focus"),o.panelDetails.list.focusIndex(0)):e.code===h.ok&&o.panelDetails.button.events.click&&o.panelDetails.button.emit("click",{event:e})}}})),o.panelSet=new r({visible:!1,$node:document.getElementById("panelSetInfo"),focusIndex:0,panels:[o.panelDetails]}),o.panelSet.drawShadow(),o.add(o.panelSet),o.addListener("keydown",function(e){switch(e.code){case h.back:s.back()}}),o.addListener("show",function(e){o.panelSet.show(),e&&e.data&&e.data.data&&(o.initData=e.data.data.items[1].data.data,o.panelDetails.reset())})}),e.exports=o},function(e,t,i){"use strict";var a="pageInit",n=i(4),s=new n({$node:document.getElementById(a)});e.exports=s},function(e,t,i){"use strict";var a="pageMain",n=i(4),s=i(5),o=i(33),r=i(3),l=new n({$node:document.getElementById(a)}),d=i(10),c=i(9),h=i(8),u=i(14),p=i(19),m=i(17),f=i(12),v=i(2),g=i(11),y=i(15),w=core.plugins.fs,x=i(7),$=core.plugins.pvr,b=i(16)(),k=i(30),D=i(20),I={"-1":gettext("Wrong record parameters."),"-2":gettext("Not enough memory."),"-3":gettext("Wrong recording range (start or end time). e.i. recording duration must be less or equal than 24 hours."),"-4":gettext("Task with specified ID was not found."),"-5":gettext("Wrong file name. Folder where you want to save recording must exist."),"-6":gettext("Duplicate tasks. Recording with that file name already exists."),"-7":gettext("Error opening stream URL."),"-8":gettext("Error opening output file."),"-9":gettext("Maximum number of simultaneous recording is exceeded."),"-10":gettext("Manager got end of stream and recording has finished earlier keeping the recorded file."),"-11":gettext("Error writing output file. E.i. disk is full or has been disconnected during recording."),"-12":gettext("Wrong record url."),"-13":gettext("Wrong file name."),"-14":gettext("Wrong record start time."),"-15":gettext("Wrong record end time."),"-16":gettext("Bad record.")},N={"-1":gettext("Wrong channel id."),"-2":gettext("Server error."),"-3":gettext("Bad record.")};window.page=l,window.app=s,window.router=r,l.addListener("load",function(){function e(){var e,t,i,a=[],n={2:1,1:2,0:3,3:4,4:5},r=s.records.slice(),d=l.middlePanel.list;for(t=0;t<r.length;t++)if(!(null!==o.list.filterStatus&&r[t].data.state!==o.list.filterStatus||o.list.filterSearch.trim()&&-1===r[t].data.name.indexOf(o.list.filterSearch)&&-1===r[t].data.url.indexOf(o.list.filterSearch))){if(r[t].data.server)r[t].data.storage={freeSize:0,fsType:0,isReadOnly:0,label:gettext("Server"),mediaType:2,model:"",mountPath:"",partitionNum:0,size:0,sn:"",vendor:""};else for(i=0;i<s.storages.length;i++)if(-1!==r[t].data.path.indexOf(s.storages[i].mountPath)){r[t].data.storage=s.storages[i];break}a.push({items:[{className:"icon "+["","waiting","running","error","completed"][Number(r[t].data.state)],value:""},{value:r[t].data.progress+"% "+r[t].data.name,className:"title",data:s.records[t]}]})}o.list.sort?1===o.list.sort?r.sort(function(e,t){return n[e.data.state]-n[t.data.state]}):r.sort(function(e,t){return t.data.startTime-e.data.startTime}):r.sort(function(e,t){return e.data.name.toLowerCase().localeCompare(t.data.name.toLowerCase())}),e={data:a},a.length?(e.focusIndex=d.$focusItem&&d.$focusItem.index<a.length?d.$focusItem.index:0,l.middlePanel.scroll.init({realSize:a.length,viewSize:7}),l.middlePanel.scroll.show()):(l.rightPanel.reset(),l.activeComponent===l.middlePanel.list&&l.footer.hide(),l.middlePanel.scroll.hide()),d.setData(e)}s.storages=w.getMountPoints().concat(w.getHDDInfo()),s.records=[],l.clock=new x,l.add(l.clock),l.footer=new k({visible:!1,parent:l}),w.onMount=function(e){s.storages=w.getMountPoints().concat(w.getHDDInfo()),r.current===r.ids.pageAdd&&(r.ids.pageAdd.modalSelectDevice.visible&&r.ids.pageAdd.modalSelectDevice.hide(),r.ids.pageAdd.panelSet.reset(),r.ids.pageAdd.panelSet.focus())},l.playFocusedFile=function(){var e=l.middlePanel.list.$focusItem.data.items[1].data;4===e.data.state&&(e.data.server?b.getFileUrl(e,function(t,i){t?core.notify({title:N[t.code],icon:"alert",type:"warning"}):core.intent({action:"play",data:{uri:i.url,title:e.data.name}},function(e){e&&core.notify({title:e.message,icon:"alert",type:"warning"})})}):core.intent({action:"play",data:{uri:e.data.path,title:e.data.name}},function(e){e&&core.notify({title:e.message,icon:"alert",type:"warning"})}))},l.deleteFocusedTask=function(){var e;l.middlePanel.list.$focusItem&&l.middlePanel.list.$focusItem.data&&(e=l.middlePanel.list.$focusItem.data.items[1].data,e.data.server?b.remove(e,function(e){e&&core.notify({title:N[e.code],icon:"alert",type:"warning"}),l.modalActions.hide(),l.middlePanel.focus(),l.middlePanel.reset()}):$.remove(e,!1,function(e){e&&core.notify({title:I[e.code],icon:"alert",type:"warning"}),l.modalActions.hide(),l.middlePanel.focus(),l.middlePanel.reset()}))},l.modalActions=new u({visible:!1,title:gettext("actions"),events:{show:function(e){var t=e.$item.data.items[1].data.data,i=[{items:[{className:"icon",value:""},{value:gettext("Details")}],click:function(){l.modalActions.hide(),l.panelSet.blur(),r.navigate("pageInfo",l.middlePanel.list.$focusItem)}},{items:[{className:"icon f1",value:""},{value:gettext("Delete task")}],click:l.deleteFocusedTask}];4===t.state&&i.unshift({items:[{className:"icon running",value:""},{value:gettext("Play file")}],click:function(){l.modalActions.hide(),l.panelSet.focus(),l.playFocusedFile()}}),t.server||i.push({items:[{className:"icon",value:""},{value:gettext("Delete task and file")}],click:function(){var e;l.middlePanel.list.$focusItem&&l.middlePanel.list.$focusItem.data&&(e=l.middlePanel.list.$focusItem.data.items[1].data,$.remove(e,!0,function(e){e&&core.notify({title:I[e.code],icon:"alert",type:"warning"}),l.modalActions.hide(),l.middlePanel.focus(),l.middlePanel.reset()}))}}),this.children[0].init({data:i,size:i.length,focusIndex:0}),this.focus()}},children:[new h({cycle:!0,data:[],events:{keydown:function(e){h.prototype.defaultEvents.keydown.call(this,e),e.code===v.back&&(e.stop=!0,l.modalActions.hide(),l.middlePanel.focus())}}})]}),l.add(l.modalActions),l.modalFilterStatus=new u({visible:!1,title:gettext("categories"),events:{show:function(){var e,t=[{state:!1,title:gettext("All categories"),value:null},{state:!1,title:gettext("Waiting"),value:1},{state:!1,title:gettext("In progress"),value:2},{state:!1,title:gettext("Error"),value:3},{state:!1,title:gettext("Completed"),value:4}],i=0;for(e=0;e<t.length;e++)if(o.list.filterStatus===t[e].value){t[e].state=!0,i=e;break}this.children[0].setData({data:t,focusIndex:i}),this.focus()}},children:[new p({cycle:!0,focusIndex:0,size:5,data:[],events:{"click:item":function(e){l.leftPanel.list.$focusItem.layout.$node.children[1].innerText=e.$item.data.title,o.list.filterStatus=e.$item.data.value,l.middlePanel.reset(),l.modalFilterStatus.hide(),l.panelSet.focus()},keydown:function(e){e.code===v.back&&(e.stop=!0,l.modalFilterStatus.hide(),l.panelSet.focus()),p.prototype.defaultEvents.keydown.call(this,e)}}})]}),l.add(l.modalFilterStatus),l.modalSort=new u({visible:!1,title:gettext("sort"),events:{show:function(){var e,t=0,i=[{state:!1,title:gettext("By name"),value:0},{state:!1,title:gettext("By category"),value:1},{state:!1,title:gettext("By date"),value:2}];for(e=0;e<i.length;e++)if(o.list.sort===i[e].value){i[e].state=!0,t=e;break}this.children[0].setData({data:i,focusIndex:t}),this.focus()}},children:[new p({cycle:!0,focusIndex:0,size:3,data:[],events:{"click:item":function(e){l.leftPanel.list.$focusItem.layout.$node.children[1].innerText=e.$item.data.title,o.list.sort=e.$item.data.value,l.middlePanel.reset(),l.modalSort.hide(),l.panelSet.focus()},keydown:function(e){p.prototype.defaultEvents.keydown.call(this,e),e.code===v.back&&(e.stop=!0,l.modalSort.hide(),l.panelSet.focus())}}})]}),l.add(l.modalSort),l.leftPanel=new c({title:gettext("Menu"),children:[],className:"leftPanel"}),l.leftPanel.add(l.leftPanel.list=new h({cycle:!0,focusIndex:0,size:4,data:[{items:[{className:"icon search",value:""},l.leftPanel.search=new m({placeholder:gettext("Search"),events:{keydown:function(e){switch(m.prototype.defaultEvents.keydown.call(this,e),e.code){case v.back:e.stop=!0;break;case v.ok:this.parent.emit("click")}}}})],click:function(e){o.list.filterSearch=e.data.items[1].value.value,l.middlePanel.reset()}},{items:[{className:"icon categories",value:""},{value:gettext("All categories")}],click:function(){l.panelSet.blur(),l.modalFilterStatus.show()}},{items:[{className:"icon byNumber",value:""},{value:gettext("By name")}],click:function(){l.panelSet.blur(),l.modalSort.show()}}],events:{"focus:item":function(){l.footer.init([{type:"f1",title:gettext("Reset filters"),action:function(){o.list.filterSearch="",l.leftPanel.search.setValue(""),o.list.filterStatus=null,l.leftPanel.list.$body.children[1].layout.$node.children[1].innerText=gettext("All categories"),l.middlePanel.reset()}}]),l.footer.show()},focus:function(){l.footer.init([{type:"f1",title:gettext("Reset filters"),action:function(){o.list.filterSearch="",l.leftPanel.search.setValue(""),o.list.filterStatus=null,l.leftPanel.list.$body.children[1].layout.$node.children[1].innerText=gettext("All categories"),l.middlePanel.reset()}}]),l.footer.show()},blur:function(){l.footer.hide()}}})),l.middlePanel=new c({title:gettext("Records"),main:!0,children:[],className:"middlePanel"}),l.middlePanel.updateDelay=null,l.middlePanel.scroll=new y({}),l.middlePanel.add(l.middlePanel.list=new h({cycle:!0,focusIndex:0,size:7,data:[],scroll:l.middlePanel.scroll,events:{"focus:item":function(e){var t;window.clearTimeout(l.middlePanel.updateDelay),l.middlePanel.updateDelay=window.setTimeout(function(){e?(t=[{type:"f1",title:gettext("Delete task"),action:l.deleteFocusedTask},{type:"menu",action:function(){l.panelSet.blur(),l.modalActions.show({$item:l.middlePanel.list.$focusItem})}}],l.rightPanel.reset(e),l.middlePanel.list.$focusItem&&4===l.middlePanel.list.$focusItem.data.items[1].data.data.state&&t.push({type:"f2",title:gettext("Play file"),action:l.playFocusedFile}),l.activeComponent===l.middlePanel.list&&(l.footer.init(t),l.footer.show())):l.activeComponent===l.middlePanel.list&&l.footer.hide()},core.environment.onFocusDebounceTimeout)},"click:item":function(e){l.middlePanel.list.$focusItem&&(l.panelSet.blur(),l.modalActions.show(e))},focus:function(){var e=[{type:"f1",title:gettext("Delete task"),action:l.deleteFocusedTask},{type:"menu",action:function(){l.panelSet.blur(),l.modalActions.show({$item:l.middlePanel.list.$focusItem})}}];l.middlePanel.list.$focusItem?(4===l.middlePanel.list.$focusItem.data.items[1].data.data.state&&e.push({type:"f2",title:gettext("Play file"),action:l.playFocusedFile}),l.footer.init(e),l.footer.show()):l.footer.hide()},blur:function(){l.footer.hide()}},noData:f.tag("div",{className:"panelHint"},f.tag("div",{className:"hint"},f.tag("div",{className:"hint",innerHTML:gettext("No records")})))}),l.middlePanel.scroll),l.middlePanel.resetTimeOut=null,l.middlePanel.reset=function(){window.clearTimeout(l.middlePanel.resetTimeOut),l.middlePanel.resetTimeOut=setTimeout(e,300)},l.rightPanel=new c({title:gettext("Details"),className:"rightPanel"}),l.rightPanel.scroll=new y({}),l.rightPanel.textArea=new D({propagate:!0,step:5,scroll:l.rightPanel.scroll}),l.rightPanel.add(l.rightPanel.textArea,l.rightPanel.scroll),l.rightPanel.reset=function(e){var t,i,a,n=l.rightPanel.textArea;n.$channel||n.$body.appendChild(f.fragment(f.tag("div",{className:"title"},gettext("Channel:")),n.$channel=f.tag("div",{}),f.tag("div",{className:"title"},gettext("Record name:")),n.$name=f.tag("div",{}),f.tag("div",{className:"title"},gettext("Record start:")),n.$date=f.tag("div",{}),f.tag("div",{className:"title"},gettext("Record length:")),n.$time=f.tag("div",{}),f.tag("div",{className:"title"},gettext("Storage:")),n.$storage=f.tag("div",{}),f.tag("div",{className:"title"},gettext("Status:")),n.$state=f.tag("div",{}))),e&&e.$curr&&e.$curr.data?(t=e.$curr.data.items[1].data.data,i=g.parseDate(new Date(1e3*t.startTime)),a={hours:Math.floor((t.endTime-t.startTime)/3600),minute:Math.ceil((t.endTime-t.startTime)/60%60)},n.$channel.innerText=t.channel,
n.$name.innerText=t.name,n.$date.innerText=i,n.$time.innerText=a.hours?a.hours+" "+gettext("h.")+" "+a.minute+" "+gettext("m."):a.minute+" "+gettext("m."),n.$storage.innerText=t.storage?t.storage.label:gettext("Not connected"),n.$state.innerText=["",gettext("Waiting"),gettext("Running"),gettext("Error"),gettext("Completed")][Number(t.state)],l.rightPanel.textArea.show(),l.rightPanel.textArea.init()):l.rightPanel.textArea.hide()},l.panelSet=new d({visible:!0,$node:document.getElementById("panelSetMain"),panels:[l.leftPanel,l.middlePanel,l.rightPanel]}),l.panelSet.focusIndex=1,l.panelSet.drawShadow(),l.add(l.panelSet),l.addListener("keydown",function(e){switch(e.code){case v.back:l.panelSet.blur(),s.exit(function(){l.panelSet.focus()})}}),b.addListeners({add:function(e){s.records.push(e.item),l.middlePanel.reset()},remove:function(e){s.records.splice(s.records.indexOf(e.item),1),l.middlePanel.reset()},progress:function(){l.middlePanel.reset()},state:function(){l.middlePanel.reset()}}),$.addListeners({add:function(e){s.records.push(e.item),l.middlePanel.reset()},remove:function(e){s.records.splice(s.records.indexOf(e.item),1),l.middlePanel.reset()},progress:function(){l.middlePanel.reset()},state:function(){l.middlePanel.reset()}}),core.addListener("intent",function(e,t){"record"===e.action&&(s.intent=e,r.navigate("pageAdd"),r.current.reset(),t(!1,{}))}),core.once("exit",function(){$.removeAllListeners()}),$.reset(),b.restore(),l.addListener("show",function(){l.panelSet.show(),l.panelSet.focus()}),r.navigate("pageMain"),s.show()}),e.exports=l},function(e,t,i){"use strict";var a="pageMore",n=i(4),s=i(3),o=new n({$node:document.getElementById(a)}),r=i(20),l=i(15),d=i(10),c=i(9),h=i(13),u=i(7),p=i(2);window.mpage=o,o.addListener("load",function(){o.clock=new u,o.add(o.clock),o.panelDetails=new c({main:!0,visible:!0,className:"panelDetails",children:[],title:"_"}),o.panelDetails.reset=function(e){o.panelDetails.$title.innerText=e.title,o.panelDetails.scroll.init({value:0}),o.panelDetails.area.$body.innerText=e.value,o.panelDetails.area.$body.style.top="0px",o.panelDetails.area.init(),o.panelDetails.focus(),o.panelDetails.scroll.viewSize<o.panelDetails.scroll.realSize?o.panelDetails.area.focus():o.panelDetails.button.focus()},o.panelDetails.button=new h({value:gettext("Close"),className:"bottom",$node:o.panelDetails.$node.appendChild(document.createElement("div")),events:{click:function(){s.back()},keydown:function(e){e.code===p.up&&o.panelDetails.scroll.viewSize<o.panelDetails.scroll.realSize?o.panelDetails.area.focus():e.code===p.ok&&o.panelDetails.button.events.click&&o.panelDetails.button.emit("click",{event:e})}}}),o.panelDetails.add(o.panelDetails.button),o.panelDetails.scroll=new l({}),o.panelDetails.area=new r({visible:!0,scroll:o.panelDetails.scroll,events:{overflow:function(e){e.direction===p.down&&(o.panelDetails.area.blur(),o.panelDetails.button.focus())}}}),o.panelDetails.add(o.panelDetails.area,o.panelDetails.scroll),o.panelSet=new d({visible:!1,$node:document.getElementById("panelSetMore"),focusIndex:0,panels:[o.panelDetails]}),o.panelSet.drawShadow(),o.add(o.panelSet),o.addListener("keydown",function(e){switch(e.code){case p.back:s.back()}}),o.addListener("show",function(e){o.panelSet.show(),o.panelDetails.reset({title:e.data.$item.data.items[0].value,value:e.data.$item.data.items[1].value})})}),e.exports=o},function(module,exports,__webpack_require__){"use strict";var Emitter=__webpack_require__(6),gettext=new Emitter,meta=null,data=null;gettext.load=function(e,t){var i=new XMLHttpRequest;e.ext=e.ext||"json",e.path=e.path||"lang",i.responseType="text",i.onload=function(){var e;try{e=JSON.parse(i.responseText),meta=e.meta,data=e.data,t(null,data)}catch(a){meta=null,data=null,i.onerror(a)}gettext.events.load&&gettext.emit("load")},i.onerror=function(e){t(e),gettext.events.error&&gettext.emit("error")},i.open("GET",e.path+"/"+e.name+"."+e.ext,!0),i.send(null)},window.gettext=function(e){return data&&data[""][e]?data[""][e]:e},window.pgettext=function(e,t){return data&&data[e][t]?data[e][t]:t},window.ngettext=function(msgId,plural,value){return data&&meta?data[""][msgId][eval("var n = "+value+"; "+meta.plural)]:1===value?msgId:plural},module.exports=gettext},function(e,t,i){"use strict";function a(e){n.call(this),this.data=e||{}}var n=i(6);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.idName="id",a.prototype.clear=function(){var e=this.data;return Object.keys(e).length>0?(this.data={},this.events.clear&&this.emit("clear",{data:e}),!0):!1},a.prototype.init=function(e){return e?(this.clear(),this.data=e,this.events.init&&this.emit("init",{data:e}),!0):!1},a.prototype.has=function(e){return this.data.hasOwnProperty(e)},a.prototype.get=function(e){return this.data[e]},a.prototype.set=function(e,t){var i=e in this.data,a={name:e,curr:t};return i?(a.prev=this.data[e],t!==a.prev?(this.data[e]=t,this.events.change&&this.emit("change",a),!0):!1):(this.data[e]=t,this.events.change&&this.emit("change",a),!0)},a.prototype.unset=function(e){var t,i=e in this.data;return i?(t={name:e,prev:this.data[e]},delete this.data[e],this.events.change&&this.emit("change",t),!0):!1},e.exports=a},function(e,t){"use strict";if(!("classList"in document.documentElement)){var i=Array.prototype,a=i.indexOf,n=i.slice,s=i.push,o=i.splice,r=i.join;window.DOMTokenList=function(e){if(this._element=e,e.className!==this._classCache){if(this._classCache=e.className,!this._classCache)return;var t,i=this._classCache.replace(/^\s+|\s+$/g,"").split(/\s+/);for(t=0;t<i.length;t++)s.call(this,i[t])}},window.DOMTokenList.prototype={add:function(e){this.contains(e)||(s.call(this,e),this._element.className=n.call(this,0).join(" "))},contains:function(e){return-1!==a.call(this,e)},item:function(e){return this[e]||null},remove:function(e){var t=a.call(this,e);-1!==t&&(o.call(this,t,1),this._element.className=n.call(this,0).join(" "))},toString:function(){return r.call(this," ")},toggle:function(e){return this.contains(e)?this.remove(e):this.add(e),this.contains(e)}},Object.defineProperty(Element.prototype,"classList",{get:function(){return new window.DOMTokenList(this)}})}},function(e,t,i){"use strict";function a(e){e=e||{},e.className="checkBox "+(e.className||""),this.value=!!e.value,this.value&&(e.className+=" checked"),n.call(this,e),this.group=null,e.group&&(this.group=e.group,void 0===o[e.group]?o[e.group]=[this]:o[e.group].push(this))}var n=i(1),s=i(2),o={};a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.defaultEvents={click:function(){this.set(!this.value)},keydown:function(e){e.code===s.ok&&this.set(!this.value)}},a.prototype.set=function(e){var t,i;if(this.value!==e){if(!this.value&&null!==this.group)for(t=0,i=o[this.group].length;i>t;t++)o[this.group][t].set(!1);return this.value=!this.value,this.$node.classList.toggle("checked"),this.events.change&&this.emit("change",{value:this.value}),!0}return!1},e.exports=a},function(e,t,i){"use strict";function a(e){var t;e=e||{},e.focusable=!1,e.className="footer "+(e.className||""),e.visible=e.visible||!1,e.$body=document.createElement("div"),e.$body.className="body",n.call(this,e),this.tabs=[],this.tab=0,this.$node.appendChild(o.tag("table",{},o.tag("tr",{},o.tag("td",{},o.tag("div",{className:"icon menu"})),o.tag("td",{className:"central"},this.tabs[0]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"}))),this.tabs[1]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"}))),this.tabs[2]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"}))),this.tabs[3]=o.tag("div",{className:"wrapper hidden"},o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})),o.tag("div",{className:"button"},o.tag("div",{className:"iconImg"}),o.tag("div",{className:"title"})))),o.tag("td",{},this.$info=o.tag("div",{className:"icon info"}))))),this.init(e.data),t=this,this.parent.addListener("keydown",function(e){var i=t.tabs[t.tab];if(t.visible)switch(e.code){case s.f1:i.f1&&"function"==typeof i.f1.action&&i.f1.action();break;case s.f2:i.f2&&"function"==typeof i.f2.action&&i.f2.action();break;case s.f3:i.f3&&"function"==typeof i.f3.action&&i.f3.action();break;case s.f4:i.f4&&"function"==typeof i.f4.action&&i.f4.action();break;case s.menu:i.menu&&"function"==typeof i.menu.action&&i.menu.action();break;case s.info:"none"!==t.$info.style.display&&(i.classList.contains("hidden")?i.classList.remove("hidden"):i.classList.add("hidden"))}})}var n=i(1),s=(i(4),i(2)),o=i(12);a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.prototype.init=function(e){var t,i=!this.tabs[this.tab].classList.contains("hidden"),a=0;for(e=e||[],this.tabs[this.tab].classList.add("hidden"),this.$info.style.display="none",e.forEach(function(e){-1!==["f1","f2","f3","f4"].indexOf(e.type)&&a++}),this.tab=0===a?0:a-1,a=0,this.tabs[this.tab].f1&&(this.tabs[this.tab].f1.action=null),this.tabs[this.tab].f2&&(this.tabs[this.tab].f2.action=null),this.tabs[this.tab].f3&&(this.tabs[this.tab].f3.action=null),this.tabs[this.tab].f4&&(this.tabs[this.tab].f4.action=null),this.tabs[this.tab].menu&&(this.tabs[this.tab].menu.action=null),t=0;t<e.length;t++)this.tabs[this.tab][e[t].type]={action:e[t].action},"menu"!==e[t].type&&(this.tabs[this.tab].children[a].children[0].className="iconImg "+e[t].type,this.tabs[this.tab].children[a].children[1].innerText=e[t].title,a++);a&&(this.$info.style.display="block"),i&&a&&this.tabs[this.tab].classList.remove("hidden")},e.exports=a},function(e,t,i){"use strict";function a(e){e=e||{},this.focusIndex=0,e.className="layout "+(e.className||""),this.data=[],s.call(this,e),this.init(e),this.addListener("keydown",function(e){switch(e.code){case o.right:this.children.length&&this.focusIndex<this.children.length-1&&this.children[++this.focusIndex].focus();break;case o.left:this.children.length&&this.focusIndex>0&&this.children[--this.focusIndex].focus();break;case o.back:this.parent.focus(),this.parent&&this.$parentItem&&this.parent.focusItem(this.$parentItem)}})}function n(e){var t,i;for(t=0;t<e.length;t++)i=e[t],"object"!=typeof i?e[t]={value:e[t],wrap:!0}:i instanceof s||i instanceof HTMLElement?e[t]={value:i,wrap:!1}:e[t].wrap=!0;return e}var s=i(1),o=i(2);a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.init=function(e){for(var t,i,a,o=this,r=n(e.data);this.$node.firstChild;)this.$node.removeChild(this.$node.firstChild);for(this.data=r,a=0;a<r.length;a++)t=r[a],"string"==typeof t.value?(i=document.createElement("div"),i.textContent=t.value,t.className&&(i.className=t.className),this.$node.appendChild(i)):t.value instanceof HTMLElement?t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value),this.$node.appendChild(i)):this.$node.appendChild(t.value):t.value instanceof s&&(t.value.propagate=!0,t.value.index=this.children.length,t.value.addListener("click",function(){o.focusIndex=this.index}),t.wrap?(i=document.createElement("div"),t.className&&(i.className=t.className),i.appendChild(t.value.$node),this.$node.appendChild(i),this.children.push(t.value),t.value.parent=this):this.add(t.value))},e.exports=a},function(e,t,i){"use strict";function a(e){e=e||{},e.className="valueList "+(e.className||""),this.data=[],this.currentIndex=0,this.current=null,this.cycle=!1,s.call(this,e),this.init(e)}function n(e){var t,i;for(t=0;t<e.length;t++)i=e[t],"object"!=typeof i&&(i=e[t]={value:e[t]});return e}var s=i(1),o=i(2);a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.init=function(e){e.cycle&&(this.cycle=e.cycle),e.render&&(this.renderValue=e.render),e.data&&(this.data=n(e.data),e.index&&(this.currentIndex=e.index),this.current=this.data[this.currentIndex],this.updateData())},a.prototype.renderValueDefault=function(e){e.innerText=this.current.value},a.prototype.renderValue=a.prototype.renderValueDefault,a.prototype.updateData=function(){this.renderValue(this.$body),this.emit("data:change",{current:this.current})},a.prototype.defaultEvents={keydown:function(e){switch(e.code){case o.down:case o.up:this.change(e.code)}}},a.prototype.change=function(e){switch(e){case o.down:this.currentIndex+1<this.data.length?(this.currentIndex++,this.current=this.data[this.currentIndex],this.updateData()):(this.cycle&&(this.currentIndex=0,this.current=this.data[0],this.updateData()),this.emit("overflow",{direction:e,cycle:this.cycle}));break;case o.up:this.currentIndex>0?(this.currentIndex--,this.current=this.data[this.currentIndex],this.updateData()):(this.cycle&&(this.currentIndex=this.data.length-1,this.current=this.data[this.currentIndex],this.updateData()),this.emit("overflow",{direction:e,cycle:this.cycle}))}},e.exports=a},function(e,t){"use strict";e.exports={list:{filterStatus:null,filterSearch:"",sort:0},extensions:{registered:["mpg","mpeg","mkv","avi","3gp","ts","tspinf","m4a","mp3","mp4","ac3","mov","vob","wav","ape","mts","m2t","m2v","ogg","oga","divx","aiff","m2ts","wv","m2p","tp","flv","tta","mod","tod","asf","wma","wmv","flac","ape","cue","m3u","m3u8","jpg","jpeg","png","bmp","tif","tiff","iso","aac","txt","srt","sub","ass","m4v","tts"]}}},function(e,t){"use strict";e.exports={480:{height:480,width:720,availTop:24,availBottom:24,availRight:32,availLeft:48,keyboardWidth:558,keyboardHeight:311},576:{height:576,width:720,availTop:24,availBottom:24,availRight:26,availLeft:54,keyboardWidth:558,keyboardHeight:311},720:{height:720,width:1280,availTop:30,availBottom:30,availRight:40,availLeft:40,keyboardWidth:818,keyboardHeight:311},1080:{height:1080,width:1920,availTop:45,availBottom:45,availRight:60,availLeft:60,keyboardWidth:1227,keyboardHeight:467}}},function(e,t,i){"use strict";function a(){this.events={}}a.prototype={addListener:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)},once:function(e,t){var i=this;this.events[e]=this.events[e]||[],this.events[e].push(function a(){t.apply(this,arguments),i.removeListener(e,a)})},addListeners:function(e){var t;for(t in e)e.hasOwnProperty(t)&&this.addListener(t,e[t])},removeListener:function(e,t){this.events[e]&&(this.events[e]=this.events[e].filter(function(e){return e!==t}),0===this.events[e].length&&(this.events[e]=void 0))},removeAllListeners:function(e){0===arguments.length?this.events={}:e&&(this.events[e]=void 0)},emit:function(e){var t,i=this.events[e];if(i)for(t=0;t<i.length;t++)i[t].apply(this,Array.prototype.slice.call(arguments,1))}},a.prototype.constructor=a,e.exports=a}]);